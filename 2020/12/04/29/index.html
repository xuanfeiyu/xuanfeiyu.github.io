<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScipt," />










<meta name="description" content="作者：FY引用请标明出处  Part 2 · 前端工程化实践模块二 · 模块化开发与规范化标准任务一：模块化开发1.模块化概述 内容概要 模块化演变过程 模块化规范 常用的模块化打包工具 基于模块化工具构建现代 Web 应用 打包工具的优化技巧    2.模块化演变过程 Stage1 - 文件划分方式 污染全局作用域 命名冲突问题 无法管理模块依赖关系 早期模块化完全依靠约定   Stage2">
<meta property="og:type" content="article">
<meta property="og:title" content="学习笔记 ----- 【前端工程化实践】模块化开发与规范化标准">
<meta property="og:url" content="http://yoursite.com/2020/12/04/29/index.html">
<meta property="og:site_name" content="旋の飞羽">
<meta property="og:description" content="作者：FY引用请标明出处  Part 2 · 前端工程化实践模块二 · 模块化开发与规范化标准任务一：模块化开发1.模块化概述 内容概要 模块化演变过程 模块化规范 常用的模块化打包工具 基于模块化工具构建现代 Web 应用 打包工具的优化技巧    2.模块化演变过程 Stage1 - 文件划分方式 污染全局作用域 命名冲突问题 无法管理模块依赖关系 早期模块化完全依靠约定   Stage2">
<meta property="article:published_time" content="2020-12-03T16:00:00.000Z">
<meta property="article:modified_time" content="2020-12-04T11:47:21.266Z">
<meta property="article:author" content="FY">
<meta property="article:tag" content="JavaScipt">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/12/04/29/"/>





  <title>学习笔记 ----- 【前端工程化实践】模块化开发与规范化标准 | 旋の飞羽</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">旋の飞羽</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人间值得，未来可期。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/04/29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旋の飞羽">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">学习笔记 ----- 【前端工程化实践】模块化开发与规范化标准</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-12-04T00:00:00+08:00">
                2020-12-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>作者：FY<br>引用请标明出处</p>
</blockquote>
<h1 id="Part-2-·-前端工程化实践"><a href="#Part-2-·-前端工程化实践" class="headerlink" title="Part 2 · 前端工程化实践"></a>Part 2 · 前端工程化实践</h1><h2 id="模块二-·-模块化开发与规范化标准"><a href="#模块二-·-模块化开发与规范化标准" class="headerlink" title="模块二 · 模块化开发与规范化标准"></a>模块二 · 模块化开发与规范化标准</h2><h2 id="任务一：模块化开发"><a href="#任务一：模块化开发" class="headerlink" title="任务一：模块化开发"></a>任务一：模块化开发</h2><h3 id="1-模块化概述"><a href="#1-模块化概述" class="headerlink" title="1.模块化概述"></a>1.模块化概述</h3><ul>
<li>内容概要<ul>
<li>模块化演变过程</li>
<li>模块化规范</li>
<li>常用的模块化打包工具</li>
<li>基于模块化工具构建现代 Web 应用</li>
<li>打包工具的优化技巧</li>
</ul>
</li>
</ul>
<h3 id="2-模块化演变过程"><a href="#2-模块化演变过程" class="headerlink" title="2.模块化演变过程"></a>2.模块化演变过程</h3><ul>
<li>Stage1 - 文件划分方式<ul>
<li>污染全局作用域</li>
<li>命名冲突问题</li>
<li>无法管理模块依赖关系</li>
<li>早期模块化完全依靠约定</li>
</ul>
</li>
<li>Stage2 - 命名空间方式</li>
<li>Stage3 - IIFE</li>
<li>早期在没有工具和规范的情况下对模块化的落地方式</li>
</ul>
<h3 id="3-模块化规范的出现"><a href="#3-模块化规范的出现" class="headerlink" title="3.模块化规范的出现"></a>3.模块化规范的出现</h3><ul>
<li>CommonJS 规范<ul>
<li>一个文件就是一个模块</li>
<li>每个模块都有单独的作用域</li>
<li>通过 module.exports 导出成员</li>
<li>通过 require 函数载入模块</li>
</ul>
</li>
<li>CommonJS 是以同步模式加载模块</li>
<li>AMD(Asynchronous Module Definiton)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个模块</span></span><br><span class="line">define(<span class="string">'module1'</span>, [<span class="string">'jquery'</span>, <span class="string">'./module2'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">$, module2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        start: funciton() &#123;</span><br><span class="line">            $(<span class="string">'body'</span>).animate(&#123; <span class="attr">margin</span>: <span class="number">200</span>px<span class="string">' &#125;)</span></span><br><span class="line"><span class="string">            module2()</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Require.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 载入一个模块</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'./module1'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">module1</span>)</span>&#123;</span><br><span class="line">    module1.start()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>目前绝大多数第三方库都支持AMD规范</li>
<li>AMD 使用起来相对复杂</li>
<li>模块 JS 文件请求频繁</li>
<li>Sea.js + CMD</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CMD 规范（类似 Common.js 规范）</span></span><br><span class="line">define(funciton (<span class="built_in">require</span>, exports, <span class="built_in">module</span>)) &#123;</span><br><span class="line">    <span class="comment">// 通过 require 引入依赖</span></span><br><span class="line">    <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>)</span><br><span class="line">    <span class="comment">// 通过 exports 或者 module.exports 对外暴露成员</span></span><br><span class="line">    <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'module 2~'</span>)</span><br><span class="line">        $(<span class="string">'body'</span>).append(<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>module2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-模块化标准规范"><a href="#4-模块化标准规范" class="headerlink" title="4.模块化标准规范"></a>4.模块化标准规范</h3><ul>
<li>浏览器环境 ES Modules</li>
<li>NodeJs 环境 Common.js</li>
</ul>
<h3 id="5-ES-Modules-特性"><a href="#5-ES-Modules-特性" class="headerlink" title="5.ES Modules 特性"></a>5.ES Modules 特性</h3><ul>
<li>自动采用严格模式，忽略’use strict’</li>
<li>每个 ESM 模块都是单独的私有作用域</li>
<li>ESM 是通过 cors 去请求外部 JS 模块的</li>
<li>ESM 的 script 标签会延迟执行脚本</li>
</ul>
<h3 id="6-ES-Modules-导出"><a href="#6-ES-Modules-导出" class="headerlink" title="6.ES Modules 导出"></a>6.ES Modules 导出</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./module.js</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">'es modules'</span></span><br><span class="line"><span class="keyword">export</span> &#123; foo &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ./app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'./module.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// es modules</span></span><br></pre></td></tr></table></figure>

<h3 id="7-ES-Modules-导入导出的注意事项"><a href="#7-ES-Modules-导入导出的注意事项" class="headerlink" title="7.ES Modules 导入导出的注意事项"></a>7.ES Modules 导入导出的注意事项</h3><ul>
<li>export 后面大括号是固定语法，不是对象字面量。 export default { name, age } 是对象字面量。</li>
<li>import 不是解构，就是固定用法。</li>
<li>导出是把值存放的地址导出，不是复制。</li>
<li>导入的成员是只读成员，不能修改。</li>
</ul>
<h3 id="8-ES-Modules-导入用法"><a href="#8-ES-Modules-导入用法" class="headerlink" title="8.ES Modules 导入用法"></a>8.ES Modules 导入用法</h3><ul>
<li>需要完整路径和扩展名，不能省略 ./</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;&#125; <span class="keyword">from</span> <span class="string">'./module.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./module.js'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mod <span class="keyword">from</span> <span class="string">'./module.js'</span></span><br><span class="line"><span class="keyword">import</span>(<span class="string">'./moudle.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">module</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">module</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">import</span> &#123; name, age, <span class="keyword">default</span> <span class="keyword">as</span> title &#125; rom <span class="string">'./module.js'</span></span><br><span class="line"><span class="keyword">import</span> title, &#123; name, age &#125; rom <span class="string">'./module.js'</span></span><br></pre></td></tr></table></figure>

<h3 id="9-ES-Modules-导出导入成员"><a href="#9-ES-Modules-导出导入成员" class="headerlink" title="9.ES Modules 导出导入成员"></a>9.ES Modules 导出导入成员</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// idnex.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">'./button.js'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Avatar &#125; <span class="keyword">from</span> <span class="string">'./avatar.js'</span></span><br><span class="line"><span class="keyword">export</span> &#123; Button, Avatar &#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-ES-Modules-浏览器环境-Polyfill"><a href="#10-ES-Modules-浏览器环境-Polyfill" class="headerlink" title="10.ES Modules 浏览器环境 Polyfill"></a>10.ES Modules 浏览器环境 Polyfill</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script nomodule src=<span class="string">"https://unpkg.com/promise-polyfill@8.1.3/dist/polyfill.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script nomodule src="https:/</span><span class="regexp">/unpkg.com/</span>browser-es-moudle-loader@<span class="number">0.4</span><span class="number">.1</span>/dist/babel-browser-build.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script nomodule src="</span>https:<span class="comment">//unpkg.com/browser-es-moudle-loader@0.4.1/dist/browser-es-module-loader.js"&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="11-ES-Modules-in-Node-js-支持情况"><a href="#11-ES-Modules-in-Node-js-支持情况" class="headerlink" title="11.ES Modules in Node.js - 支持情况"></a>11.ES Modules in Node.js - 支持情况</h3><ul>
<li>node –experimental-modules index.mjs</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持</span></span><br><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span></span><br><span class="line"><span class="built_in">console</span>.log(_.cameClass(<span class="string">'ES Module'</span>))</span><br><span class="line"><span class="comment">// 不支持，因为第三方模块都是导出默认成员</span></span><br><span class="line"><span class="keyword">import</span> &#123; cameClass &#125; <span class="keyword">from</span> <span class="string">'lodash'</span></span><br><span class="line"><span class="built_in">console</span>.log(cameClass(<span class="string">'ES Module'</span>))</span><br><span class="line"><span class="comment">// 内置模块兼容了 ESM 的提取成员方式</span></span><br><span class="line"><span class="keyword">import</span> &#123; writeFileSunc &#125; <span class="keyword">from</span> <span class="string">'fs'</span></span><br><span class="line">writeFileSunc(<span class="string">'./bar.txt'</span>, <span class="string">'es module working~'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="12-ES-Modules-in-Node-js-与-CommonjS-交互"><a href="#12-ES-Modules-in-Node-js-与-CommonjS-交互" class="headerlink" title="12.ES Modules in Node.js - 与 CommonjS 交互"></a>12.ES Modules in Node.js - 与 CommonjS 交互</h3><ul>
<li>ES Module 中可以导入 CommonJS 模块</li>
<li>CommonJS 中不能导入 ES Modules 模块</li>
<li>CommonJS 模块始终只会导出一个默认成员</li>
<li>注意 import 不是解构导出对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es-module.mjs</span></span><br><span class="line"><span class="comment">// ES Module 中可以导入 CommonJS 模块</span></span><br><span class="line"><span class="keyword">import</span> mod <span class="keyword">from</span> <span class="string">'./commonjs.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(mod)</span><br><span class="line"><span class="comment">// 不能直接提取成员，注意 import 不是解构导出对象</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'./commonjs.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> foo = <span class="string">'es module export value'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// commonjs.js</span></span><br><span class="line"><span class="comment">// CommonJS 模块始终只会导出一个默认成员</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  foo: <span class="string">'commonjs exports value'</span></span><br><span class="line">&#125;</span><br><span class="line">exports.foo = <span class="string">'commonjs exports value'</span></span><br><span class="line"><span class="comment">// 不能再 CommonJS 模块中通过 require 载入 ES Module</span></span><br><span class="line"><span class="keyword">const</span> mod = <span class="built_in">require</span>(<span class="string">'./es-module.mjs'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(mod)</span><br></pre></td></tr></table></figure>

<h3 id="13-ES-Modules-in-Node-js-与-CommonjS-的差异"><a href="#13-ES-Modules-in-Node-js-与-CommonjS-的差异" class="headerlink" title="13.ES Modules in Node.js - 与 CommonjS 的差异"></a>13.ES Modules in Node.js - 与 CommonjS 的差异</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// esm.mjs</span></span><br><span class="line"><span class="comment">// ESM 中没有 CommonJS 中那些模块全局成员了</span></span><br><span class="line"><span class="keyword">import</span> &#123; fileURLToPath &#125; <span class="keyword">from</span> <span class="string">'url'</span></span><br><span class="line"><span class="keyword">import</span> &#123; dirname &#125; <span class="keyword">from</span> <span class="string">'path'</span></span><br><span class="line"><span class="keyword">const</span> __filename = fileURLToPath(<span class="keyword">import</span>.meta.url)</span><br><span class="line"><span class="built_in">console</span>.log(__filename)</span><br><span class="line"><span class="keyword">const</span> __dirname = dirname(__filename)</span><br><span class="line"><span class="built_in">console</span>.log(__dirname)</span><br></pre></td></tr></table></figure>

<h3 id="14-ES-Modules-in-Node-js-新版本进一步支持"><a href="#14-ES-Modules-in-Node-js-新版本进一步支持" class="headerlink" title="14.ES Modules in Node.js - 新版本进一步支持"></a>14.ES Modules in Node.js - 新版本进一步支持</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pakage.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"type"</span>: <span class="string">"module"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// common.cjs</span></span><br></pre></td></tr></table></figure>

<h3 id="15-ES-Modules-in-Node-js-Babel-兼容方案"><a href="#15-ES-Modules-in-Node-js-Babel-兼容方案" class="headerlink" title="15.ES Modules in Node.js - Babel 兼容方案"></a>15.ES Modules in Node.js - Babel 兼容方案</h3><ul>
<li><p>yarn add @babel/node @babel/core @babel/preset-env –dev</p>
</li>
<li><p>yarn babel-node</p>
</li>
<li><p>yarn babel-node index.js –presets=@babel/preset-env</p>
</li>
<li><p>yarn add @babel/plugin-transform-modules-commonjs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .babelrc</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [<span class="string">"@babel/preset-env"</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// .babelrc</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"plugins"</span>: [<span class="string">"@babel/plugin-transform-modules-commonjs"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="任务二：Webpack打包"><a href="#任务二：Webpack打包" class="headerlink" title="任务二：Webpack打包"></a>任务二：Webpack打包</h2><h3 id="1-模块打包工具的由来"><a href="#1-模块打包工具的由来" class="headerlink" title="1.模块打包工具的由来"></a>1.模块打包工具的由来</h3><ul>
<li>ES Modules 存在环境兼容问题</li>
<li>模块文件过多，网络请求频繁</li>
<li>所有的前端资源都需要模块化</li>
<li>新特性代码编译</li>
<li>模块化 javascript 打包</li>
<li>支持不同类型的资源模块</li>
</ul>
<h3 id="2-模块打包工具概要"><a href="#2-模块打包工具概要" class="headerlink" title="2.模块打包工具概要"></a>2.模块打包工具概要</h3><ul>
<li>打包工具解决的是前端整体的模块化，并不单指 Javascript 模块化</li>
</ul>
<h3 id="3-Webpack-快速上手"><a href="#3-Webpack-快速上手" class="headerlink" title="3.Webpack 快速上手"></a>3.Webpack 快速上手</h3><ul>
<li>yarn add webpack webpack-cli –dev</li>
</ul>
<h3 id="4-Webpack-配置文件"><a href="#4-Webpack-配置文件" class="headerlink" title="4.Webpack 配置文件"></a>4.Webpack 配置文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-Webpack-工作模式"><a href="#5-Webpack-工作模式" class="headerlink" title="5.Webpack 工作模式"></a>5.Webpack 工作模式</h3><ul>
<li>默认为 production</li>
<li>yarn webpack –mode development</li>
<li>yarn webpack –mode none</li>
</ul>
<h3 id="6-Webpack-打包结果运行原理"><a href="#6-Webpack-打包结果运行原理" class="headerlink" title="6.Webpack 打包结果运行原理"></a>6.Webpack 打包结果运行原理</h3><p>略</p>
<h3 id="7-Webpack-资源模块加载"><a href="#7-Webpack-资源模块加载" class="headerlink" title="7.Webpack 资源模块加载"></a>7.Webpack 资源模块加载</h3><ul>
<li>yarn add css-loader –dev</li>
<li>yarn add style-loader –dev</li>
<li>Loader 是 Webpack 的核心特性</li>
<li>借助于Loader就可以加载任何类型的资源</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-Webpack-导入资源模块"><a href="#8-Webpack-导入资源模块" class="headerlink" title="8.Webpack 导入资源模块"></a>8.Webpack 导入资源模块</h3><ul>
<li>根据代码的需要动态导入资源</li>
<li>需要资源的不是应用，而是代码</li>
<li>javascript驱动整个前端应用</li>
<li>逻辑合理，JS确实需要这些资源文件</li>
<li>确保上线资源不缺失，都是必要的</li>
<li>新事物的思想才是突破点</li>
</ul>
<h3 id="9-Webpack-文件资源加载器"><a href="#9-Webpack-文件资源加载器" class="headerlink" title="9.Webpack 文件资源加载器"></a>9.Webpack 文件资源加载器</h3><ul>
<li>yarn add file-loader –dev</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">      publicPath: <span class="string">'dist/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: <span class="string">'file-loader'</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-Webpack-URL加载器"><a href="#10-Webpack-URL加载器" class="headerlink" title="10.Webpack URL加载器"></a>10.Webpack URL加载器</h3><ul>
<li>yarn add url-loader –dev</li>
<li>小文件使用 Data URLs，减少请求次数</li>
<li>大文件单独提取存放，提高加载速度</li>
<li>必须同时安装 file-loader</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">      publicPath: <span class="string">'dist/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-Webpack-常用加载器分类"><a href="#11-Webpack-常用加载器分类" class="headerlink" title="11.Webpack 常用加载器分类"></a>11.Webpack 常用加载器分类</h3><ul>
<li>编译转换类<ul>
<li>css-loader</li>
</ul>
</li>
<li>文件操作类<ul>
<li>file-loader</li>
</ul>
</li>
<li>代码检查类<ul>
<li>eslint-loader</li>
</ul>
</li>
</ul>
<h3 id="12-Webpack-与-ES-2015"><a href="#12-Webpack-与-ES-2015" class="headerlink" title="12.Webpack 与 ES 2015"></a>12.Webpack 与 ES 2015</h3><ul>
<li>因为模块打包需要，所以处理 import 和 export</li>
<li>yarn add babel-loader @babel/core @babel/preset-env –dev</li>
<li>Webpack 只是打包工具</li>
<li>加载器可以用来编译转换代码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">      publicPath: <span class="string">'dist/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-Webpack-加载资源的方式"><a href="#13-Webpack-加载资源的方式" class="headerlink" title="13.Webpack 加载资源的方式"></a>13.Webpack 加载资源的方式</h3><ul>
<li>遵循 ES Modules 标准的 import 声明</li>
<li>遵循 CommonJS 标准的 require 函数 </li>
<li>遵循 AMD 标准的 define 函数和 require 函数</li>
<li>*样式代码中的@import指令和url函数</li>
<li>*HTML 代码中图片标签的src属性</li>
</ul>
<h3 id="14-Webpack-核心工作原理"><a href="#14-Webpack-核心工作原理" class="headerlink" title="14.Webpack 核心工作原理"></a>14.Webpack 核心工作原理</h3><ul>
<li>Loader 机制是 Webpack 的核心</li>
</ul>
<h3 id="15-Webpack-开发一个-Loader"><a href="#15-Webpack-开发一个-Loader" class="headerlink" title="15.Webpack 开发一个 Loader"></a>15.Webpack 开发一个 Loader</h3><ul>
<li>Loader 负责资源文件从输入到输出的转换</li>
<li>对于同一个资源可以依次使用多个 Loader</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">      publicPath: <span class="string">'dist/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.md$/</span>,</span><br><span class="line">          use: [<span class="string">'html-loader'</span>,<span class="string">'./markdown-loader'</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// markdown-loader.js</span></span><br><span class="line"><span class="keyword">const</span> marked = <span class="built_in">require</span>(<span class="string">'marked'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">source</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> html = marked(source)</span><br><span class="line">  <span class="comment">// return `module.exports = $&#123;JSON.stringify(html)&#125;`</span></span><br><span class="line">  <span class="comment">// return `export default = $&#123;JSON.stringify(html)&#125;`</span></span><br><span class="line">  <span class="keyword">return</span> html</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-Webpack-插件机制介绍"><a href="#16-Webpack-插件机制介绍" class="headerlink" title="16.Webpack 插件机制介绍"></a>16.Webpack 插件机制介绍</h3><ul>
<li>增强 Webpack 自动化能力</li>
<li>Loader 专注实现资源模块加载</li>
<li>Plugin 解决其他自动化工作<ul>
<li>e.g.清除 dist 目录</li>
<li>e.g.拷贝静态文件至输出目录</li>
<li>e.g.压缩输出代码</li>
</ul>
</li>
</ul>
<h3 id="17-Webpack-自动清除输出目录插件"><a href="#17-Webpack-自动清除输出目录插件" class="headerlink" title="17.Webpack 自动清除输出目录插件"></a>17.Webpack 自动清除输出目录插件</h3><ul>
<li>yarn add clean-webpack-plugin –dev</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">      publicPath: <span class="string">'dist/'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-Webpack-自动生成-HTML-插件（上）"><a href="#18-Webpack-自动生成-HTML-插件（上）" class="headerlink" title="18.Webpack 自动生成 HTML 插件（上）"></a>18.Webpack 自动生成 HTML 插件（上）</h3><ul>
<li>yarn add html-webpack-plugin –dev</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'HTML-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-Webpack-自动生成-HTML-插件（中）"><a href="#19-Webpack-自动生成-HTML-插件（中）" class="headerlink" title="19.Webpack 自动生成 HTML 插件（中）"></a>19.Webpack 自动生成 HTML 插件（中）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="20-Webpack-自动生成-HTML-插件（下）"><a href="#20-Webpack-自动生成-HTML-插件（下）" class="headerlink" title="20.Webpack 自动生成 HTML 插件（下）"></a>20.Webpack 自动生成 HTML 插件（下）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="21-Webpack-插件使用总结"><a href="#21-Webpack-插件使用总结" class="headerlink" title="21.Webpack 插件使用总结"></a>21.Webpack 插件使用总结</h3><ul>
<li>yarn add copy-webpack-plugin –dev</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> CopyWebpackPlugin(&#123;</span><br><span class="line">        <span class="comment">// 'public/**'</span></span><br><span class="line">        <span class="string">'public'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="22-Webpack-开发一个插件"><a href="#22-Webpack-开发一个插件" class="headerlink" title="22.Webpack 开发一个插件"></a>22.Webpack 开发一个插件</h3><ul>
<li>Plugin 通过钩子机制实现</li>
<li>一个函数或者是一个包含 apply 方法的对象</li>
<li>通过在生命周期的钩子中挂载函数实现扩展</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPlugin</span> </span>&#123;</span><br><span class="line">  apply(compiler)&#123;</span><br><span class="line">    compiler.hooks.emit.tap(<span class="string">'MyPlugin'</span>, compilation =&gt; &#123;</span><br><span class="line">      <span class="comment">// compilation =&gt; 可以理解为此次打包的上下文</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">const</span> name <span class="keyword">in</span> compilation.assets) &#123;</span><br><span class="line">        <span class="comment">// console.log(name)</span></span><br><span class="line">        <span class="comment">// console.log(compilation.assets[name].source())</span></span><br><span class="line">        <span class="keyword">if</span>(name.endWidth(<span class="string">'.js'</span>)) &#123;</span><br><span class="line">          <span class="keyword">const</span> contents = compilation.assets[name].source()</span><br><span class="line">          <span class="keyword">const</span> withoutComments = content.replace(<span class="regexp">/\/\*\*+\*\//g</span>, <span class="string">''</span>)</span><br><span class="line">          compilation.assets[name] = &#123;</span><br><span class="line">            source: <span class="function"><span class="params">()</span> =&gt;</span> withoutComments</span><br><span class="line">            size: <span class="function"><span class="params">()</span> =&gt;</span> withoutComments.length</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> CopyWebpackPlugin(&#123;</span><br><span class="line">        <span class="comment">// 'public/**'</span></span><br><span class="line">        <span class="string">'public'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> MyPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="23-Webpack-开发体验问题"><a href="#23-Webpack-开发体验问题" class="headerlink" title="23.Webpack 开发体验问题"></a>23.Webpack 开发体验问题</h3><ul>
<li>以 HTTP Server 运行</li>
<li>自动编译 + 自动刷新</li>
<li>提供 Source Map 支持</li>
</ul>
<h3 id="24-Webpack-自动编译"><a href="#24-Webpack-自动编译" class="headerlink" title="24.Webpack 自动编译"></a>24.Webpack 自动编译</h3><ul>
<li>yarn webpack –watch</li>
</ul>
<h3 id="25-Webpack-自动刷新浏览器"><a href="#25-Webpack-自动刷新浏览器" class="headerlink" title="25.Webpack 自动刷新浏览器"></a>25.Webpack 自动刷新浏览器</h3><ul>
<li>browser-sync dist –files “<em>*/</em>“</li>
</ul>
<h3 id="26-Webpack-Dev-Server"><a href="#26-Webpack-Dev-Server" class="headerlink" title="26.Webpack Dev Server"></a>26.Webpack Dev Server</h3><ul>
<li>yarn add webpack-dev-server –dev</li>
</ul>
<h3 id="27-Webpack-Dev-Server-静态资源访问"><a href="#27-Webpack-Dev-Server-静态资源访问" class="headerlink" title="27.Webpack Dev Server 静态资源访问"></a>27.Webpack Dev Server 静态资源访问</h3><ul>
<li>contentBase 额外为开发服务器指定查找资源目录</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPlugin</span> </span>&#123;</span><br><span class="line">  apply(compiler)&#123;</span><br><span class="line">    compiler.hooks.emit.tap(<span class="string">'MyPlugin'</span>, compilation =&gt; &#123;</span><br><span class="line">      <span class="comment">// compilation =&gt; 可以理解为此次打包的上下文</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">const</span> name <span class="keyword">in</span> compilation.assets) &#123;</span><br><span class="line">        <span class="comment">// console.log(name)</span></span><br><span class="line">        <span class="comment">// console.log(compilation.assets[name].source())</span></span><br><span class="line">        <span class="keyword">if</span>(name.endWidth(<span class="string">'.js'</span>)) &#123;</span><br><span class="line">          <span class="keyword">const</span> contents = compilation.assets[name].source()</span><br><span class="line">          <span class="keyword">const</span> withoutComments = content.replace(<span class="regexp">/\/\*\*+\*\//g</span>, <span class="string">''</span>)</span><br><span class="line">          compilation.assets[name] = &#123;</span><br><span class="line">            source: <span class="function"><span class="params">()</span> =&gt;</span> withoutComments</span><br><span class="line">            size: <span class="function"><span class="params">()</span> =&gt;</span> withoutComments.length</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">      contentBase: <span class="string">'./public'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// 开发阶段最好不要使用这个插件</span></span><br><span class="line">      <span class="comment">// new CopyWebpackPlugin(['public']),</span></span><br><span class="line">      <span class="keyword">new</span> MyPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="28-Webpack-Dev-Server-代理-API"><a href="#28-Webpack-Dev-Server-代理-API" class="headerlink" title="28.Webpack Dev Server 代理 API"></a>28.Webpack Dev Server 代理 API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">      contentBase: <span class="string">'./public'</span>,</span><br><span class="line">      proxy: &#123;</span><br><span class="line">        <span class="string">'./api'</span>: &#123;</span><br><span class="line">          <span class="comment">// http://localhost:8080/api/users -&gt; https://api.github.com/api/users</span></span><br><span class="line">          target: <span class="string">'https://api.github.com'</span>,</span><br><span class="line">          <span class="comment">// http://localhost:8080/api/users -&gt; https://api.github.com/users</span></span><br><span class="line">          pathRewrite: &#123;</span><br><span class="line">            <span class="string">'^api'</span>: <span class="string">''</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// 不能使用 localhost:8080作为请求 GitHub 的主机名</span></span><br><span class="line">          changeOrigin: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// 开发阶段最好不要使用这个插件</span></span><br><span class="line">      <span class="comment">// new CopyWebpackPlugin(['public']),</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="29-Souce-Map-介绍"><a href="#29-Souce-Map-介绍" class="headerlink" title="29.Souce Map 介绍"></a>29.Souce Map 介绍</h3><ul>
<li>Source Map 解决了源代码与运行代码不一致所产生的问题</li>
</ul>
<h3 id="30-Webpack-配置-Source-Map"><a href="#30-Webpack-配置-Source-Map" class="headerlink" title="30.Webpack 配置 Source Map"></a>30.Webpack 配置 Source Map</h3><ul>
<li>Webpack支持12种不同的方式，每种方式的效率和效果各不相同</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    devtool: <span class="string">'source-map'</span>,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// 开发阶段最好不要使用这个插件</span></span><br><span class="line">      <span class="comment">// new CopyWebpackPlugin(['public']),</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="31-Webpack-eval-模式的-Source-Map"><a href="#31-Webpack-eval-模式的-Source-Map" class="headerlink" title="31.Webpack eval 模式的 Source Map"></a>31.Webpack eval 模式的 Source Map</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    devtool: <span class="string">'eval'</span>,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="comment">// 开发阶段最好不要使用这个插件</span></span><br><span class="line">      <span class="comment">// new CopyWebpackPlugin(['public']),</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="32-Webpack-devtool-模式对比（上）"><a href="#32-Webpack-devtool-模式对比（上）" class="headerlink" title="32.Webpack devtool 模式对比（上）"></a>32.Webpack devtool 模式对比（上）</h3><p>略</p>
<h3 id="33-Webpack-devtool-模式对比（下）"><a href="#33-Webpack-devtool-模式对比（下）" class="headerlink" title="33.Webpack devtool 模式对比（下）"></a>33.Webpack devtool 模式对比（下）</h3><ul>
<li>eval - 是否使用eval执行模块代码</li>
<li>cheap - Source Map是否包含行信息</li>
<li>module - 是否能够得到Loader处理之前的源代码</li>
</ul>
<h3 id="34-Webpack-选择-Source-Map-模式"><a href="#34-Webpack-选择-Source-Map-模式" class="headerlink" title="34.Webpack 选择 Source Map 模式"></a>34.Webpack 选择 Source Map 模式</h3><ul>
<li>开发模式 cheap-module-eval-source-map<ul>
<li>代码每行不会超过80个字符</li>
<li>代码经过Loader转换过后的差异较大</li>
<li>首次打包速度慢无所谓，重写打包相对较快</li>
</ul>
</li>
<li>生产环境 none / nosources-source-map<ul>
<li>Source Map 会暴露源代码</li>
<li>调试是开发阶段的事情</li>
</ul>
</li>
</ul>
<h3 id="35-Webpack-自动刷新的问题"><a href="#35-Webpack-自动刷新的问题" class="headerlink" title="35.Webpack 自动刷新的问题"></a>35.Webpack 自动刷新的问题</h3><ul>
<li>页面不刷新的情况下，模块也可以及时更新</li>
</ul>
<h3 id="36-Webpack-HRM-体验"><a href="#36-Webpack-HRM-体验" class="headerlink" title="36.Webpack HRM 体验"></a>36.Webpack HRM 体验</h3><ul>
<li>应用运行过程中实时替换某个模块，应用运行状态不受影响</li>
<li>热替换只将修改的模块实时替换至应用中</li>
</ul>
<h3 id="37-Webpack-开启-HRM"><a href="#37-Webpack-开启-HRM" class="headerlink" title="37.Webpack 开启 HRM"></a>37.Webpack 开启 HRM</h3><ul>
<li>webpack-dev-server –hot</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wabpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span></span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">      path: path.join(__dirname,<span class="string">'output'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    devtool: <span class="string">'eval'</span>,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">      hot: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.js$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/.png$/</span>,</span><br><span class="line">          use: &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 10kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        title: <span class="string">'Webpack Plugin Sample'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          viewport: <span class="string">'width=device-width'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'./src/index.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'about.html'</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">      <span class="comment">// 开发阶段最好不要使用这个插件</span></span><br><span class="line">      <span class="comment">// new CopyWebpackPlugin(['public']),</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="38-Webpack-HRM-的疑问"><a href="#38-Webpack-HRM-的疑问" class="headerlink" title="38.Webpack HRM 的疑问"></a>38.Webpack HRM 的疑问</h3><ul>
<li>样式文件可以热更新</li>
<li>js文件还是刷新，我们需要手动处理JS模块热更新后的热替换</li>
</ul>
<h3 id="39-Webpack-使用-HRM-API"><a href="#39-Webpack-使用-HRM-API" class="headerlink" title="39.Webpack 使用 HRM API"></a>39.Webpack 使用 HRM API</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">moudle.exports.hot.accept(<span class="string">'./editor'</span>, ()=&gt; &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'editor 模块更新了，需要这里手动处理热替换逻辑'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="40-Webpack-处理-JS-模块热替换"><a href="#40-Webpack-处理-JS-模块热替换" class="headerlink" title="40.Webpack 处理 JS 模块热替换"></a>40.Webpack 处理 JS 模块热替换</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">let</span> lastEditor = editor</span><br><span class="line">moudle.hot.accept(<span class="string">'./editor'</span>, ()=&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> value = lastEditor.innerHTML</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(editor)</span><br><span class="line">  <span class="keyword">const</span> newEditor = createEditor()</span><br><span class="line">  newEditor.innerHTML = value</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(newEditor)</span><br><span class="line">  lastEditor = newEditor</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="41-Webpack-处理图片模块热替换"><a href="#41-Webpack-处理图片模块热替换" class="headerlink" title="41.Webpack 处理图片模块热替换"></a>41.Webpack 处理图片模块热替换</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">moudle.hot.accept(<span class="string">'./better.png'</span>, ()=&gt; &#123;</span><br><span class="line">  img.src = background</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="42-Webpack-HRM-注意事项"><a href="#42-Webpack-HRM-注意事项" class="headerlink" title="42.Webpack HRM 注意事项"></a>42.Webpack HRM 注意事项</h3><ul>
<li>处理 HRM 的代码报错会导致自动刷新</li>
<li>没启用 HRM 的情况下，HRM API 报错</li>
<li>代码中多了一些与业务无关的代码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    hotOnly: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot)&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="43-Webpack-生产环境优化"><a href="#43-Webpack-生产环境优化" class="headerlink" title="43.Webpack 生产环境优化"></a>43.Webpack 生产环境优化</h3><ul>
<li>生产环境和开发环境有很大的差异</li>
<li>生产环境注重运行效率</li>
<li>开发环境注重开发效率</li>
<li>为不同的工作环境创建不同的配置</li>
</ul>
<h3 id="44-Webpack-不同环境下的配置"><a href="#44-Webpack-不同环境下的配置" class="headerlink" title="44.Webpack 不同环境下的配置"></a>44.Webpack 不同环境下的配置</h3><ul>
<li>配置文件根据环境不同导出不同的配置</li>
<li>一个环境对应一个配置文件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env, argv</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="keyword">const</span> config = &#123;</span><br><span class="line">   ...</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span>(env === <span class="string">'production'</span>)&#123;</span><br><span class="line">   config.mode = <span class="string">'production'</span></span><br><span class="line">   config.devtool = <span class="literal">false</span></span><br><span class="line">   config.plugins = &#123;</span><br><span class="line">     ...config.plugins,</span><br><span class="line">     <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">     <span class="keyword">new</span> CopyWebpackPlugin([<span class="string">'public'</span>])</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> config</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="45-Webpack-不同环境的配置文件"><a href="#45-Webpack-不同环境的配置文件" class="headerlink" title="45.Webpack 不同环境的配置文件"></a>45.Webpack 不同环境的配置文件</h3><ul>
<li>yarn add webpack-merge –dev</li>
<li>yarn webpack –config webpack.prod.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.common.js</span></span><br><span class="line"><span class="comment">// webpack.dev.js</span></span><br><span class="line"><span class="comment">// webpack.prod.js</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common'</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> CopyWebpackPlugin([<span class="string">'public'</span>])</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="46-Webpack-DefinePlugin"><a href="#46-Webpack-DefinePlugin" class="headerlink" title="46.Webpack DefinePlugin"></a>46.Webpack DefinePlugin</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'none'</span>,</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      <span class="comment">// API_BASE_URL: '"https://api.example.com"'</span></span><br><span class="line">      API_BASE_URL: <span class="built_in">JSON</span>.stringify(<span class="string">'https://api.example.com'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="47-Webpack-体验-Tree-Shaking"><a href="#47-Webpack-体验-Tree-Shaking" class="headerlink" title="47.Webpack 体验 Tree Shaking"></a>47.Webpack 体验 Tree Shaking</h3><ul>
<li>摇掉代码中未引用部分（dead-code）</li>
<li>在生产环境中自动开启</li>
</ul>
<h3 id="48-Webpack-使用-Tree-Shaking"><a href="#48-Webpack-使用-Tree-Shaking" class="headerlink" title="48.Webpack 使用 Tree Shaking"></a>48.Webpack 使用 Tree Shaking</h3><ul>
<li>Tree Shaking 不是指某个配置选项</li>
<li>一组功能搭配使用后的优化效果</li>
<li>production 模式下自动启动</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'none'</span>,</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    useExports: <span class="literal">true</span> <span class="comment">// 负责标记枯树叶</span></span><br><span class="line">    minimize: <span class="literal">true</span> <span class="comment">// 负责摇掉它们</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="49-Webpack-合并模块"><a href="#49-Webpack-合并模块" class="headerlink" title="49.Webpack 合并模块"></a>49.Webpack 合并模块</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'none'</span>,</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    useExports: <span class="literal">true</span> <span class="comment">// 负责标记枯树叶</span></span><br><span class="line">    concatenatModules: <span class="literal">true</span>, <span class="comment">// 尽可能的将所有模块合并并输出到一个函数中，既提升了运行效率，又减少了代码的体积</span></span><br><span class="line">    <span class="comment">// minimize: true // 负责摇掉它们</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="50-Webpack-Tree-Shaking-与-Babel"><a href="#50-Webpack-Tree-Shaking-与-Babel" class="headerlink" title="50.Webpack Tree Shaking 与 Babel"></a>50.Webpack Tree Shaking 与 Babel</h3><ul>
<li>Tree Shaking 前提是 ES Modules</li>
<li>由 Webpack 打包的代码必须使用 ESM</li>
<li>为了转换代码中的 ECMAScript 新特性，很多时候使用 babel-loader，ES Modules -&gt; CommonJS</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'none'</span>,</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js&amp;/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            <span class="comment">// presets: ['@babel/preset-env']</span></span><br><span class="line">            presets: [</span><br><span class="line">              [<span class="string">'@babel/preset-env'</span>,&#123;<span class="attr">modules</span>: <span class="string">'commonjs'</span>&#125;]</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    useExports: <span class="literal">true</span> <span class="comment">// 负责标记枯树叶</span></span><br><span class="line">    <span class="comment">// concatenatModules: true, // 尽可能的将所有模块合并并输出到一个函数中，既提升了运行效率，又减少了代码的体积</span></span><br><span class="line">    <span class="comment">// minimize: true // 负责摇掉它们</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="51-Webpack-sideEffects"><a href="#51-Webpack-sideEffects" class="headerlink" title="51.Webpack sideEffects"></a>51.Webpack sideEffects</h3><ul>
<li>sideEffects 一般用于 npm 包标记是否有副作用</li>
<li>production 下也会自动开启</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'none'</span>,</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js&amp;/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            <span class="comment">// presets: ['@babel/preset-env']</span></span><br><span class="line">            presets: [</span><br><span class="line">              [<span class="string">'@babel/preset-env'</span>,&#123;<span class="attr">modules</span>: <span class="string">'commonjs'</span>&#125;]</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    sideEffects: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// useExports: true // 负责标记枯树叶</span></span><br><span class="line">    <span class="comment">// concatenatModules: true, // 尽可能的将所有模块合并并输出到一个函数中，既提升了运行效率，又减少了代码的体积</span></span><br><span class="line">    <span class="comment">// minimize: true // 负责摇掉它们</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  sideEffects: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="52-Webpack-sideEffects-注意"><a href="#52-Webpack-sideEffects-注意" class="headerlink" title="52.Webpack sideEffects 注意"></a>52.Webpack sideEffects 注意</h3><ul>
<li>前提是确保你的代码真的没有副作用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  sideEffects: [</span><br><span class="line">    <span class="string">"./src/extends.js"</span>,</span><br><span class="line">    <span class="string">"*.css"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="53-Webpack-代码分割"><a href="#53-Webpack-代码分割" class="headerlink" title="53.Webpack 代码分割"></a>53.Webpack 代码分割</h3><ul>
<li>多入口打包</li>
<li>动态导入</li>
</ul>
<h3 id="54-Webpack-多入口打包"><a href="#54-Webpack-多入口打包" class="headerlink" title="54.Webpack 多入口打包"></a>54.Webpack 多入口打包</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 注意这里是对象</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">'./src/index.js'</span></span><br><span class="line">    album: <span class="string">'./src/album.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      titile: <span class="string">'Multi Entry'</span>,</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">      filename: <span class="string">'index.html'</span>,</span><br><span class="line">      chunks: [<span class="string">'index'</span>]</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      titile: <span class="string">'Multi Entry'</span>,</span><br><span class="line">      template: <span class="string">'./src/album.html'</span>,</span><br><span class="line">      filename: <span class="string">'album.html'</span>,</span><br><span class="line">      chunks: [<span class="string">'album'</span>]</span><br><span class="line">    &#125;), </span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="55-Webpack-提取公共模块"><a href="#55-Webpack-提取公共模块" class="headerlink" title="55.Webpack 提取公共模块"></a>55.Webpack 提取公共模块</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">&#123;</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">'all'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="56-Webpack-动态导入"><a href="#56-Webpack-动态导入" class="headerlink" title="56.Webpack 动态导入"></a>56.Webpack 动态导入</h3><ul>
<li>需要用到某个模块时，再加载这个模块</li>
<li>动态导入的模块会被自动分包</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> render = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> hash = <span class="built_in">window</span>.location.hash || <span class="string">'#posts'</span></span><br><span class="line">  <span class="keyword">const</span> mainElement = <span class="built_in">document</span>.querySelector(<span class="string">'.main'</span>)</span><br><span class="line">  mainElement.innerHTML = <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span>(hash === <span class="string">'#posts'</span>)&#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'./posts/posts'</span>).then(<span class="function">(<span class="params">&#123;<span class="keyword">default</span>: posts&#125;</span>)) =&gt;</span> &#123;</span><br><span class="line">      mainElement.appendChild(posts())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hash === <span class="string">'#album'</span>) &#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'./album/album'</span>).then(<span class="function">(<span class="params">&#123;<span class="keyword">default</span>: album&#125;</span>)) =&gt;</span> &#123;</span><br><span class="line">      mainElement.appendChild(album())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="57-Webpack-魔法注释"><a href="#57-Webpack-魔法注释" class="headerlink" title="57.Webpack 魔法注释"></a>57.Webpack 魔法注释</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> render = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> hash = <span class="built_in">window</span>.location.hash || <span class="string">'#posts'</span></span><br><span class="line">  <span class="keyword">const</span> mainElement = <span class="built_in">document</span>.querySelector(<span class="string">'.main'</span>)</span><br><span class="line">  mainElement.innerHTML = <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span>(hash === <span class="string">'#posts'</span>)&#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'posts' */</span><span class="string">'./posts/posts'</span>).then(<span class="function">(<span class="params">&#123;<span class="keyword">default</span>: posts&#125;</span>)) =&gt;</span> &#123;</span><br><span class="line">      mainElement.appendChild(posts())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hash === <span class="string">'#album'</span>) &#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'album' */</span><span class="string">'./album/album'</span>).then(<span class="function">(<span class="params">&#123;<span class="keyword">default</span>: album&#125;</span>)) =&gt;</span> &#123;</span><br><span class="line">      mainElement.appendChild(album())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="58-Webpack-MiniCssExtractPlugin"><a href="#58-Webpack-MiniCssExtractPlugin" class="headerlink" title="58.Webpack MiniCssExtractPlugin"></a>58.Webpack MiniCssExtractPlugin</h3><ul>
<li>yarn add mini-css-extract-plugin</li>
<li>建议超过 150kb 再单独提取</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  moudle: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="string">'css-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="59-Webpack-OptimizeCssAssetsWebpackPlugin"><a href="#59-Webpack-OptimizeCssAssetsWebpackPlugin" class="headerlink" title="59.Webpack OptimizeCssAssetsWebpackPlugin"></a>59.Webpack OptimizeCssAssetsWebpackPlugin</h3><ul>
<li>yarn add optimize-css-assets-webpack-plugin</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> OptimizeCssAssetsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> TerserWebpackPlugin = <span class="built_in">require</span>(<span class="string">'rerser-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  moudle: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="string">'css-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> TerserWebpackPlugin(),</span><br><span class="line">      <span class="keyword">new</span> OptimizeCssAssetsWebpackPlugin()</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// new OptimizeCssAssetsWebpackPlugin()</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="60-Webpack-输出文件名-Hash"><a href="#60-Webpack-输出文件名-Hash" class="headerlink" title="60.Webpack 输出文件名 Hash"></a>60.Webpack 输出文件名 Hash</h3><ul>
<li>生产模式下，文件名使用 Hash</li>
<li>hash chunkhash contenthash<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'none'</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: <span class="string">'./src/index.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// filename: '[name]-[hash].bundle.js'</span></span><br><span class="line">    <span class="comment">// filename: '[name]-[chunkhash].bundle.js'</span></span><br><span class="line">    filename: <span class="string">'[name]-[contenthash:8].bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      <span class="comment">// filename: '[name]-[hash].bundle.css'</span></span><br><span class="line">      <span class="comment">// filename: '[name]-[chunkhash].bundle.css'</span></span><br><span class="line">      filename: <span class="string">'[name]-[contenthash:8].bundle.css'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="任务三：其他打包工具"><a href="#任务三：其他打包工具" class="headerlink" title="任务三：其他打包工具"></a>任务三：其他打包工具</h2><h3 id="1-Rollup-概述"><a href="#1-Rollup-概述" class="headerlink" title="1.Rollup 概述"></a>1.Rollup 概述</h3><ul>
<li>仅仅是一款 ESM 打包器</li>
<li>Rollup 中并不支持类似 HMR 这种高级特性</li>
<li>提供一个充分利用 ESM 各项特性的高效打包器</li>
</ul>
<h3 id="2-Rollup-快速上手"><a href="#2-Rollup-快速上手" class="headerlink" title="2.Rollup 快速上手"></a>2.Rollup 快速上手</h3><ul>
<li>yarn add rollup –dev</li>
<li>yarn rollup ./src/index.js –format iife –file dist/bundle.js</li>
</ul>
<h3 id="3-Rollup-配置文件"><a href="#3-Rollup-配置文件" class="headerlink" title="3.Rollup 配置文件"></a>3.Rollup 配置文件</h3><ul>
<li>yarn rollup –config rollup.config.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: <span class="string">'src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    file: <span class="string">'dist/bundle.js'</span>,</span><br><span class="line">    format: <span class="string">'iife'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-Rollup-使用插件"><a href="#4-Rollup-使用插件" class="headerlink" title="4.Rollup 使用插件"></a>4.Rollup 使用插件</h3><ul>
<li>插件是 Rollup 唯一的扩展途径</li>
<li>yarn add rollup-plugin-json</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> json <span class="keyword">from</span> <span class="string">'rollup-plugin-json'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: <span class="string">'src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    file: <span class="string">'dist/bundle.js'</span>,</span><br><span class="line">    format: <span class="string">'iife'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    json()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-Rollup-加载-NPM-模块"><a href="#5-Rollup-加载-NPM-模块" class="headerlink" title="5.Rollup 加载 NPM 模块"></a>5.Rollup 加载 NPM 模块</h3><ul>
<li>yarn add rollup-plugin-node-resolve –dev</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> json <span class="keyword">from</span> <span class="string">'rollup-plugin-json'</span></span><br><span class="line"><span class="keyword">import</span> resolve <span class="keyword">from</span> <span class="string">'rollup-plugin-node-resolve'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: <span class="string">'src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    file: <span class="string">'dist/bundle.js'</span>,</span><br><span class="line">    format: <span class="string">'iife'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    json(),</span><br><span class="line">    resolve()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-Rollup-加载-CommonJS-模块"><a href="#6-Rollup-加载-CommonJS-模块" class="headerlink" title="6.Rollup 加载 CommonJS 模块"></a>6.Rollup 加载 CommonJS 模块</h3><ul>
<li>yarn add rollup-plugin-commonjs –dev</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> json <span class="keyword">from</span> <span class="string">'rollup-plugin-json'</span></span><br><span class="line"><span class="keyword">import</span> resolve <span class="keyword">from</span> <span class="string">'rollup-plugin-node-resolve'</span></span><br><span class="line"><span class="keyword">import</span> commonjs <span class="keyword">from</span> <span class="string">'rollup-plugin-commonjs'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: <span class="string">'src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    file: <span class="string">'dist/bundle.js'</span>,</span><br><span class="line">    format: <span class="string">'iife'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    json(),</span><br><span class="line">    resolve(),</span><br><span class="line">    commonjs()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-Rollup-代码拆分"><a href="#7-Rollup-代码拆分" class="headerlink" title="7.Rollup 代码拆分"></a>7.Rollup 代码拆分</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span>(<span class="string">'./logger'</span>).then(<span class="function">(<span class="params">&#123;log&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  log(<span class="string">'code splitting~'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: <span class="string">'src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    dir: <span class="string">'dist'</span>,</span><br><span class="line">    format: <span class="string">'amd'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-Rollup-多入口打包"><a href="#8-Rollup-多入口打包" class="headerlink" title="8.Rollup 多入口打包"></a>8.Rollup 多入口打包</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: &#123;</span><br><span class="line">    foo: <span class="string">'src/index.js'</span>,</span><br><span class="line">    bar: <span class="string">'src/album.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    dir: <span class="string">'dist'</span>,</span><br><span class="line">    format: <span class="string">'amd'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index.html</span></span><br><span class="line">&lt;script src=<span class="string">"https://unpkg.com/requirejs@2.3.6/require.js"</span> data-main=<span class="string">"foo.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-Rollup-选用原则"><a href="#8-Rollup-选用原则" class="headerlink" title="8.Rollup 选用原则"></a>8.Rollup 选用原则</h3><ul>
<li>输出结果更加扁平</li>
<li>自动移除未引用代码</li>
<li>打包结果依然完全可读</li>
<li>加载非 ESM 的第三方模块比较复杂</li>
<li>模块最终都被打包到一个函数中，无法实现 HMR</li>
<li>浏览器环境中，代码拆分功能依赖 AMD 库</li>
<li>应用开发使用 Webpack</li>
<li>库/框架开发使用 Rollup</li>
</ul>
<h3 id="9-Parcel"><a href="#9-Parcel" class="headerlink" title="9.Parcel"></a>9.Parcel</h3><ul>
<li>yarn add parcel-bundler</li>
<li>yarn parcel src/index.html</li>
<li>yarn parcel build src/index.html</li>
</ul>
<h2 id="任务四：规范化标准"><a href="#任务四：规范化标准" class="headerlink" title="任务四：规范化标准"></a>任务四：规范化标准</h2><h3 id="1-规范化介绍"><a href="#1-规范化介绍" class="headerlink" title="1.规范化介绍"></a>1.规范化介绍</h3><ul>
<li>为什么要有规范标准<ul>
<li>软件开发需要多人协同</li>
<li>不同开发者具有不同的编码习惯和喜好</li>
<li>不同的喜好增加项目维护成本</li>
<li>每个项目或者团队需要明确统一的标准</li>
</ul>
</li>
<li>哪里需要规范化标准<ul>
<li>代码、文档、甚至是提交日志</li>
<li>开发过程中人为编写的成果物</li>
<li>代码标准化规范最为重要</li>
</ul>
</li>
<li>实施规范化的方法<ul>
<li>编码前人为的标准约定</li>
<li>通过工具实现 Lint</li>
</ul>
</li>
<li>常见的规范化实现方式<ul>
<li>ESLint 工具使用</li>
<li>定制 ESLint 校验规则</li>
<li>ESLint 对 TypeScript 支持</li>
<li>ESLint 结合自动化工具或者 Webpack</li>
<li>基于 ESLint 的衍生工具</li>
<li>Stylelint 工具的使用</li>
</ul>
</li>
</ul>
<h3 id="2-ESLint-介绍"><a href="#2-ESLint-介绍" class="headerlink" title="2.ESLint 介绍"></a>2.ESLint 介绍</h3><ul>
<li>最为主流的 JavaScript Lint 工具 监测 JS 代码质量</li>
<li>ESLint 很容易统一开发者的编码风格</li>
<li>ESLint 可以帮助开发者提升编码能力</li>
</ul>
<h3 id="3-ESLint-安装"><a href="#3-ESLint-安装" class="headerlink" title="3.ESLint 安装"></a>3.ESLint 安装</h3><ul>
<li><p>ESLint 安装步骤</p>
<ul>
<li>初始化项目</li>
<li>安装 ESLint 模块为开发依赖</li>
<li>通过 CLI 命令验证安装结果</li>
</ul>
</li>
<li><p>npm install eslint –dev</p>
</li>
<li><p>npx eslint –version</p>
</li>
</ul>
<h3 id="4-ESLint-快速上手"><a href="#4-ESLint-快速上手" class="headerlink" title="4.ESLint 快速上手"></a>4.ESLint 快速上手</h3><ul>
<li><p>npx eslint –init</p>
</li>
<li><p>ESLint 检查步骤</p>
<ul>
<li>编写 “问题” 代码</li>
<li>使用 eslint 执行监测</li>
<li>完成 eslint 使用配置</li>
</ul>
</li>
</ul>
<h3 id="5-ESLint-配置文件解析"><a href="#5-ESLint-配置文件解析" class="headerlink" title="5.ESLint 配置文件解析"></a>5.ESLint 配置文件解析</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    es2020: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'standard'</span></span><br><span class="line">  ],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">11</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">'no-alert'</span>: <span class="string">"error"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  globals: &#123;</span><br><span class="line">    <span class="string">"jQuery"</span>: <span class="string">"readonly"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-ESLint-配置注释"><a href="#6-ESLint-配置注释" class="headerlink" title="6.ESLint 配置注释"></a>6.ESLint 配置注释</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str1 = <span class="string">"$&#123;name&#125; is a coder"</span> <span class="comment">// eslint-disable-line no-template-curly-in-string</span></span><br><span class="line"><span class="built_in">console</span>.log(str1)</span><br></pre></td></tr></table></figure>

<h3 id="7-ESLint-结合自动化工具"><a href="#7-ESLint-结合自动化工具" class="headerlink" title="7.ESLint 结合自动化工具"></a>7.ESLint 结合自动化工具</h3><ul>
<li>集成之后，ESLint 一定会工作</li>
<li>与项目统一，管理更加方便</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins.eslint.format()</span></span><br><span class="line"><span class="comment">// plugins.eslint.failAfterError()</span></span><br></pre></td></tr></table></figure>

<h3 id="8-ESLint-结合-Webpack"><a href="#8-ESLint-结合-Webpack" class="headerlink" title="8.ESLint 结合 Webpack"></a>8.ESLint 结合 Webpack</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: <span class="string">'babel-loader'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: <span class="string">'eslint-loader'</span>,</span><br><span class="line">        enforce: <span class="string">'pre'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">'style-loader'</span>,</span><br><span class="line">          <span class="string">'css-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-ESLint-结合-Webpack-后续配置"><a href="#9-ESLint-结合-Webpack-后续配置" class="headerlink" title="9.ESLint 结合 Webpack 后续配置"></a>9.ESLint 结合 Webpack 后续配置</h3><ul>
<li>npm install eslint-plugin-react</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    es2020: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'standard'</span>,</span><br><span class="line">    <span class="string">'plugin:react/recommended'</span></span><br><span class="line">  ],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">11</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="comment">// 'react/jsx-uses-react': 2,</span></span><br><span class="line">    <span class="comment">// 'react/jsx-uses-vars': 2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// plugins: [</span></span><br><span class="line">  <span class="comment">//   'react'</span></span><br><span class="line">  <span class="comment">// ]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-现代化项目集成-ESLint"><a href="#10-现代化项目集成-ESLint" class="headerlink" title="10.现代化项目集成 ESLint"></a>10.现代化项目集成 ESLint</h3><p>略</p>
<h3 id="11-ESLint-检查-TypeScript"><a href="#11-ESLint-检查-TypeScript" class="headerlink" title="11.ESLint 检查 TypeScript"></a>11.ESLint 检查 TypeScript</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    es2020: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'standard'</span>,</span><br><span class="line">  ],</span><br><span class="line">  parser: <span class="string">'@typescript-eslint/parser'</span>,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">11</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'@typescript-eslint'</span></span><br><span class="line">  ],</span><br><span class="line">  rules: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-Stylelint-认识"><a href="#12-Stylelint-认识" class="headerlink" title="12.Stylelint 认识"></a>12.Stylelint 认识</h3><ul>
<li>提供默认的代码检查规则</li>
<li>提供 CLI 工具，快速调用</li>
<li>通过插件支持 Sass Less PostCss</li>
<li>支持 Gulp 或 Webpack 集成</li>
<li>npm install stylelint -D</li>
<li>npm install stylelint-config-standard</li>
<li>npm install stylelint-config-sass-guidelines -D</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .stylelintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">"stylelint-config-standard"</span>,</span><br><span class="line">    <span class="string">"stylelint-config-sass-guidelines"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-Prettier-的使用"><a href="#13-Prettier-的使用" class="headerlink" title="13.Prettier 的使用"></a>13.Prettier 的使用</h3><ul>
<li>npm install prettier</li>
<li>npx prettier style.css –write</li>
</ul>
<h3 id="14-Git-Hooks-工作机制"><a href="#14-Git-Hooks-工作机制" class="headerlink" title="14.Git Hooks 工作机制"></a>14.Git Hooks 工作机制</h3><ul>
<li>Git Hooks 也称之为 git 钩子，每个钩子都对应一个任务</li>
<li>通过 shell 脚本可以编写钩子任务触发时要看具体执行的操作</li>
</ul>
<h3 id="15-ESLint-结合-Git-Hooks"><a href="#15-ESLint-结合-Git-Hooks" class="headerlink" title="15.ESLint 结合 Git Hooks"></a>15.ESLint 结合 Git Hooks</h3><ul>
<li>npm install husky -D</li>
<li>npm install lint-staged -D<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"eslint ./index.js"</span>,</span><br><span class="line">    <span class="string">"precommit"</span>: <span class="string">"lint-staged"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"husky"</span>: &#123;</span><br><span class="line">    <span class="string">"hooks"</span>: &#123;</span><br><span class="line">      <span class="string">"pre-commit"</span>: <span class="string">"npm run precommit"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"lint-staged"</span>: &#123;</span><br><span class="line">    <span class="string">"*.js"</span>: [</span><br><span class="line">      <span class="string">"eslint"</span>,</span><br><span class="line">      <span class="string">"git add"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScipt/" rel="tag"># JavaScipt</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/11/22/28/" rel="next" title="学习笔记 ----- 【前端工程化实践】开发脚手架及封装自动化构建工作流">
                <i class="fa fa-chevron-left"></i> 学习笔记 ----- 【前端工程化实践】开发脚手架及封装自动化构建工作流
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/12/20/30/" rel="prev" title="学习笔记 ----- 【Vue.js 框架源码与进阶】手写 Vue Router、手写响应式实现、虚拟 DOM 和 Diff 算法">
                学习笔记 ----- 【Vue.js 框架源码与进阶】手写 Vue Router、手写响应式实现、虚拟 DOM 和 Diff 算法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="FY" />
            
              <p class="site-author-name" itemprop="name">FY</p>
              <p class="site-description motion-element" itemprop="description">Just Be Yourself</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">48</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xuanfeiyu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-2-·-前端工程化实践"><span class="nav-number">1.</span> <span class="nav-text">Part 2 · 前端工程化实践</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#模块二-·-模块化开发与规范化标准"><span class="nav-number">1.1.</span> <span class="nav-text">模块二 · 模块化开发与规范化标准</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任务一：模块化开发"><span class="nav-number">1.2.</span> <span class="nav-text">任务一：模块化开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-模块化概述"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.模块化概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-模块化演变过程"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.模块化演变过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-模块化规范的出现"><span class="nav-number">1.2.3.</span> <span class="nav-text">3.模块化规范的出现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-模块化标准规范"><span class="nav-number">1.2.4.</span> <span class="nav-text">4.模块化标准规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-ES-Modules-特性"><span class="nav-number">1.2.5.</span> <span class="nav-text">5.ES Modules 特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-ES-Modules-导出"><span class="nav-number">1.2.6.</span> <span class="nav-text">6.ES Modules 导出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-ES-Modules-导入导出的注意事项"><span class="nav-number">1.2.7.</span> <span class="nav-text">7.ES Modules 导入导出的注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-ES-Modules-导入用法"><span class="nav-number">1.2.8.</span> <span class="nav-text">8.ES Modules 导入用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-ES-Modules-导出导入成员"><span class="nav-number">1.2.9.</span> <span class="nav-text">9.ES Modules 导出导入成员</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-ES-Modules-浏览器环境-Polyfill"><span class="nav-number">1.2.10.</span> <span class="nav-text">10.ES Modules 浏览器环境 Polyfill</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-ES-Modules-in-Node-js-支持情况"><span class="nav-number">1.2.11.</span> <span class="nav-text">11.ES Modules in Node.js - 支持情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-ES-Modules-in-Node-js-与-CommonjS-交互"><span class="nav-number">1.2.12.</span> <span class="nav-text">12.ES Modules in Node.js - 与 CommonjS 交互</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-ES-Modules-in-Node-js-与-CommonjS-的差异"><span class="nav-number">1.2.13.</span> <span class="nav-text">13.ES Modules in Node.js - 与 CommonjS 的差异</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-ES-Modules-in-Node-js-新版本进一步支持"><span class="nav-number">1.2.14.</span> <span class="nav-text">14.ES Modules in Node.js - 新版本进一步支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-ES-Modules-in-Node-js-Babel-兼容方案"><span class="nav-number">1.2.15.</span> <span class="nav-text">15.ES Modules in Node.js - Babel 兼容方案</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任务二：Webpack打包"><span class="nav-number">1.3.</span> <span class="nav-text">任务二：Webpack打包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-模块打包工具的由来"><span class="nav-number">1.3.1.</span> <span class="nav-text">1.模块打包工具的由来</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-模块打包工具概要"><span class="nav-number">1.3.2.</span> <span class="nav-text">2.模块打包工具概要</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Webpack-快速上手"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.Webpack 快速上手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Webpack-配置文件"><span class="nav-number">1.3.4.</span> <span class="nav-text">4.Webpack 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Webpack-工作模式"><span class="nav-number">1.3.5.</span> <span class="nav-text">5.Webpack 工作模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Webpack-打包结果运行原理"><span class="nav-number">1.3.6.</span> <span class="nav-text">6.Webpack 打包结果运行原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Webpack-资源模块加载"><span class="nav-number">1.3.7.</span> <span class="nav-text">7.Webpack 资源模块加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Webpack-导入资源模块"><span class="nav-number">1.3.8.</span> <span class="nav-text">8.Webpack 导入资源模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Webpack-文件资源加载器"><span class="nav-number">1.3.9.</span> <span class="nav-text">9.Webpack 文件资源加载器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-Webpack-URL加载器"><span class="nav-number">1.3.10.</span> <span class="nav-text">10.Webpack URL加载器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-Webpack-常用加载器分类"><span class="nav-number">1.3.11.</span> <span class="nav-text">11.Webpack 常用加载器分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-Webpack-与-ES-2015"><span class="nav-number">1.3.12.</span> <span class="nav-text">12.Webpack 与 ES 2015</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-Webpack-加载资源的方式"><span class="nav-number">1.3.13.</span> <span class="nav-text">13.Webpack 加载资源的方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-Webpack-核心工作原理"><span class="nav-number">1.3.14.</span> <span class="nav-text">14.Webpack 核心工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-Webpack-开发一个-Loader"><span class="nav-number">1.3.15.</span> <span class="nav-text">15.Webpack 开发一个 Loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-Webpack-插件机制介绍"><span class="nav-number">1.3.16.</span> <span class="nav-text">16.Webpack 插件机制介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-Webpack-自动清除输出目录插件"><span class="nav-number">1.3.17.</span> <span class="nav-text">17.Webpack 自动清除输出目录插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-Webpack-自动生成-HTML-插件（上）"><span class="nav-number">1.3.18.</span> <span class="nav-text">18.Webpack 自动生成 HTML 插件（上）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-Webpack-自动生成-HTML-插件（中）"><span class="nav-number">1.3.19.</span> <span class="nav-text">19.Webpack 自动生成 HTML 插件（中）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-Webpack-自动生成-HTML-插件（下）"><span class="nav-number">1.3.20.</span> <span class="nav-text">20.Webpack 自动生成 HTML 插件（下）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-Webpack-插件使用总结"><span class="nav-number">1.3.21.</span> <span class="nav-text">21.Webpack 插件使用总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-Webpack-开发一个插件"><span class="nav-number">1.3.22.</span> <span class="nav-text">22.Webpack 开发一个插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-Webpack-开发体验问题"><span class="nav-number">1.3.23.</span> <span class="nav-text">23.Webpack 开发体验问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-Webpack-自动编译"><span class="nav-number">1.3.24.</span> <span class="nav-text">24.Webpack 自动编译</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-Webpack-自动刷新浏览器"><span class="nav-number">1.3.25.</span> <span class="nav-text">25.Webpack 自动刷新浏览器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-Webpack-Dev-Server"><span class="nav-number">1.3.26.</span> <span class="nav-text">26.Webpack Dev Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#27-Webpack-Dev-Server-静态资源访问"><span class="nav-number">1.3.27.</span> <span class="nav-text">27.Webpack Dev Server 静态资源访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#28-Webpack-Dev-Server-代理-API"><span class="nav-number">1.3.28.</span> <span class="nav-text">28.Webpack Dev Server 代理 API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#29-Souce-Map-介绍"><span class="nav-number">1.3.29.</span> <span class="nav-text">29.Souce Map 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#30-Webpack-配置-Source-Map"><span class="nav-number">1.3.30.</span> <span class="nav-text">30.Webpack 配置 Source Map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#31-Webpack-eval-模式的-Source-Map"><span class="nav-number">1.3.31.</span> <span class="nav-text">31.Webpack eval 模式的 Source Map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#32-Webpack-devtool-模式对比（上）"><span class="nav-number">1.3.32.</span> <span class="nav-text">32.Webpack devtool 模式对比（上）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#33-Webpack-devtool-模式对比（下）"><span class="nav-number">1.3.33.</span> <span class="nav-text">33.Webpack devtool 模式对比（下）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#34-Webpack-选择-Source-Map-模式"><span class="nav-number">1.3.34.</span> <span class="nav-text">34.Webpack 选择 Source Map 模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#35-Webpack-自动刷新的问题"><span class="nav-number">1.3.35.</span> <span class="nav-text">35.Webpack 自动刷新的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#36-Webpack-HRM-体验"><span class="nav-number">1.3.36.</span> <span class="nav-text">36.Webpack HRM 体验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-Webpack-开启-HRM"><span class="nav-number">1.3.37.</span> <span class="nav-text">37.Webpack 开启 HRM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#38-Webpack-HRM-的疑问"><span class="nav-number">1.3.38.</span> <span class="nav-text">38.Webpack HRM 的疑问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-Webpack-使用-HRM-API"><span class="nav-number">1.3.39.</span> <span class="nav-text">39.Webpack 使用 HRM API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#40-Webpack-处理-JS-模块热替换"><span class="nav-number">1.3.40.</span> <span class="nav-text">40.Webpack 处理 JS 模块热替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#41-Webpack-处理图片模块热替换"><span class="nav-number">1.3.41.</span> <span class="nav-text">41.Webpack 处理图片模块热替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#42-Webpack-HRM-注意事项"><span class="nav-number">1.3.42.</span> <span class="nav-text">42.Webpack HRM 注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#43-Webpack-生产环境优化"><span class="nav-number">1.3.43.</span> <span class="nav-text">43.Webpack 生产环境优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#44-Webpack-不同环境下的配置"><span class="nav-number">1.3.44.</span> <span class="nav-text">44.Webpack 不同环境下的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#45-Webpack-不同环境的配置文件"><span class="nav-number">1.3.45.</span> <span class="nav-text">45.Webpack 不同环境的配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#46-Webpack-DefinePlugin"><span class="nav-number">1.3.46.</span> <span class="nav-text">46.Webpack DefinePlugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#47-Webpack-体验-Tree-Shaking"><span class="nav-number">1.3.47.</span> <span class="nav-text">47.Webpack 体验 Tree Shaking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#48-Webpack-使用-Tree-Shaking"><span class="nav-number">1.3.48.</span> <span class="nav-text">48.Webpack 使用 Tree Shaking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#49-Webpack-合并模块"><span class="nav-number">1.3.49.</span> <span class="nav-text">49.Webpack 合并模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#50-Webpack-Tree-Shaking-与-Babel"><span class="nav-number">1.3.50.</span> <span class="nav-text">50.Webpack Tree Shaking 与 Babel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#51-Webpack-sideEffects"><span class="nav-number">1.3.51.</span> <span class="nav-text">51.Webpack sideEffects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#52-Webpack-sideEffects-注意"><span class="nav-number">1.3.52.</span> <span class="nav-text">52.Webpack sideEffects 注意</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#53-Webpack-代码分割"><span class="nav-number">1.3.53.</span> <span class="nav-text">53.Webpack 代码分割</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#54-Webpack-多入口打包"><span class="nav-number">1.3.54.</span> <span class="nav-text">54.Webpack 多入口打包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#55-Webpack-提取公共模块"><span class="nav-number">1.3.55.</span> <span class="nav-text">55.Webpack 提取公共模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#56-Webpack-动态导入"><span class="nav-number">1.3.56.</span> <span class="nav-text">56.Webpack 动态导入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#57-Webpack-魔法注释"><span class="nav-number">1.3.57.</span> <span class="nav-text">57.Webpack 魔法注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#58-Webpack-MiniCssExtractPlugin"><span class="nav-number">1.3.58.</span> <span class="nav-text">58.Webpack MiniCssExtractPlugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#59-Webpack-OptimizeCssAssetsWebpackPlugin"><span class="nav-number">1.3.59.</span> <span class="nav-text">59.Webpack OptimizeCssAssetsWebpackPlugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#60-Webpack-输出文件名-Hash"><span class="nav-number">1.3.60.</span> <span class="nav-text">60.Webpack 输出文件名 Hash</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任务三：其他打包工具"><span class="nav-number">1.4.</span> <span class="nav-text">任务三：其他打包工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Rollup-概述"><span class="nav-number">1.4.1.</span> <span class="nav-text">1.Rollup 概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Rollup-快速上手"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.Rollup 快速上手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Rollup-配置文件"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.Rollup 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Rollup-使用插件"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.Rollup 使用插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Rollup-加载-NPM-模块"><span class="nav-number">1.4.5.</span> <span class="nav-text">5.Rollup 加载 NPM 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Rollup-加载-CommonJS-模块"><span class="nav-number">1.4.6.</span> <span class="nav-text">6.Rollup 加载 CommonJS 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Rollup-代码拆分"><span class="nav-number">1.4.7.</span> <span class="nav-text">7.Rollup 代码拆分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Rollup-多入口打包"><span class="nav-number">1.4.8.</span> <span class="nav-text">8.Rollup 多入口打包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Rollup-选用原则"><span class="nav-number">1.4.9.</span> <span class="nav-text">8.Rollup 选用原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Parcel"><span class="nav-number">1.4.10.</span> <span class="nav-text">9.Parcel</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任务四：规范化标准"><span class="nav-number">1.5.</span> <span class="nav-text">任务四：规范化标准</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-规范化介绍"><span class="nav-number">1.5.1.</span> <span class="nav-text">1.规范化介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ESLint-介绍"><span class="nav-number">1.5.2.</span> <span class="nav-text">2.ESLint 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-ESLint-安装"><span class="nav-number">1.5.3.</span> <span class="nav-text">3.ESLint 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-ESLint-快速上手"><span class="nav-number">1.5.4.</span> <span class="nav-text">4.ESLint 快速上手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-ESLint-配置文件解析"><span class="nav-number">1.5.5.</span> <span class="nav-text">5.ESLint 配置文件解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-ESLint-配置注释"><span class="nav-number">1.5.6.</span> <span class="nav-text">6.ESLint 配置注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-ESLint-结合自动化工具"><span class="nav-number">1.5.7.</span> <span class="nav-text">7.ESLint 结合自动化工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-ESLint-结合-Webpack"><span class="nav-number">1.5.8.</span> <span class="nav-text">8.ESLint 结合 Webpack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-ESLint-结合-Webpack-后续配置"><span class="nav-number">1.5.9.</span> <span class="nav-text">9.ESLint 结合 Webpack 后续配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-现代化项目集成-ESLint"><span class="nav-number">1.5.10.</span> <span class="nav-text">10.现代化项目集成 ESLint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-ESLint-检查-TypeScript"><span class="nav-number">1.5.11.</span> <span class="nav-text">11.ESLint 检查 TypeScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-Stylelint-认识"><span class="nav-number">1.5.12.</span> <span class="nav-text">12.Stylelint 认识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-Prettier-的使用"><span class="nav-number">1.5.13.</span> <span class="nav-text">13.Prettier 的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-Git-Hooks-工作机制"><span class="nav-number">1.5.14.</span> <span class="nav-text">14.Git Hooks 工作机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-ESLint-结合-Git-Hooks"><span class="nav-number">1.5.15.</span> <span class="nav-text">15.ESLint 结合 Git Hooks</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FY</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
