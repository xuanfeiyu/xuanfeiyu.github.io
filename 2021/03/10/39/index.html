<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JavaScipt," />










<meta name="description" content="作者：FY引用请标明出处  Part 4 · React 框架原理与实战模块二 · React 数据流方案专题（Redux、MobX）任务一：Redux1.【课程资料】课程资料购物车代码shooping_serve2.【课程资料】课程资料3.Redux专题内容介绍 Redux 核心 React + Redux Redux 中间件 开发 Redux 中间件 Redux 综合案例  4.Redux简">
<meta property="og:type" content="article">
<meta property="og:title" content="学习笔记 ----- 【React 框架原理与实战】React 数据流方案专题（Redux、MobX）">
<meta property="og:url" content="http://yoursite.com/2021/03/10/39/index.html">
<meta property="og:site_name" content="旋の飞羽">
<meta property="og:description" content="作者：FY引用请标明出处  Part 4 · React 框架原理与实战模块二 · React 数据流方案专题（Redux、MobX）任务一：Redux1.【课程资料】课程资料购物车代码shooping_serve2.【课程资料】课程资料3.Redux专题内容介绍 Redux 核心 React + Redux Redux 中间件 开发 Redux 中间件 Redux 综合案例  4.Redux简">
<meta property="article:published_time" content="2021-03-09T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-10T00:27:16.763Z">
<meta property="article:author" content="FY">
<meta property="article:tag" content="JavaScipt">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2021/03/10/39/"/>





  <title>学习笔记 ----- 【React 框架原理与实战】React 数据流方案专题（Redux、MobX） | 旋の飞羽</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">旋の飞羽</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人间值得，未来可期。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/03/10/39/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旋の飞羽">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">学习笔记 ----- 【React 框架原理与实战】React 数据流方案专题（Redux、MobX）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-10T00:00:00+08:00">
                2021-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>作者：FY<br>引用请标明出处</p>
</blockquote>
<h1 id="Part-4-·-React-框架原理与实战"><a href="#Part-4-·-React-框架原理与实战" class="headerlink" title="Part 4 · React 框架原理与实战"></a>Part 4 · React 框架原理与实战</h1><h2 id="模块二-·-React-数据流方案专题（Redux、MobX）"><a href="#模块二-·-React-数据流方案专题（Redux、MobX）" class="headerlink" title="模块二 · React 数据流方案专题（Redux、MobX）"></a>模块二 · React 数据流方案专题（Redux、MobX）</h2><h2 id="任务一：Redux"><a href="#任务一：Redux" class="headerlink" title="任务一：Redux"></a>任务一：Redux</h2><h3 id="1-【课程资料】课程资料购物车代码shooping-serve"><a href="#1-【课程资料】课程资料购物车代码shooping-serve" class="headerlink" title="1.【课程资料】课程资料购物车代码shooping_serve"></a>1.【课程资料】课程资料购物车代码shooping_serve</h3><h3 id="2-【课程资料】课程资料"><a href="#2-【课程资料】课程资料" class="headerlink" title="2.【课程资料】课程资料"></a>2.【课程资料】课程资料</h3><h3 id="3-Redux专题内容介绍"><a href="#3-Redux专题内容介绍" class="headerlink" title="3.Redux专题内容介绍"></a>3.Redux专题内容介绍</h3><ul>
<li>Redux 核心</li>
<li>React + Redux</li>
<li>Redux 中间件</li>
<li>开发 Redux 中间件</li>
<li>Redux 综合案例</li>
</ul>
<h3 id="4-Redux简介"><a href="#4-Redux简介" class="headerlink" title="4.Redux简介"></a>4.Redux简介</h3><blockquote>
<p>Redux 介绍</p>
</blockquote>
<ul>
<li>JavaScript 状态对象，提供可预测化的状态管理</li>
</ul>
<h3 id="5-Redux核心概念及工作流程"><a href="#5-Redux核心概念及工作流程" class="headerlink" title="5.Redux核心概念及工作流程"></a>5.Redux核心概念及工作流程</h3><ul>
<li>Store：存储状态的容器，JavaScript 对象</li>
<li>View：视图，HTML页面</li>
<li>Actions：对象，描述状态进行怎样的操作</li>
<li>Reducers：函数，操作状态并返回新的状态</li>
</ul>
<h3 id="6-Redux计数器案例"><a href="#6-Redux计数器案例" class="headerlink" title="6.Redux计数器案例"></a>6.Redux计数器案例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"plus"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"count"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"minus"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"redux.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 3. 存储默认状态</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> initialState = &#123;</span></span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 2. 创建 reducer 函数</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">reducer</span> <span class="params">(state = initialState, action)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">switch</span> (action.type) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">case</span> <span class="string">'increment'</span>:</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123;count: state.count + <span class="number">1</span>&#125;;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">case</span> <span class="string">'decrement'</span>:</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123;count: state.count - <span class="number">1</span>&#125;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>:</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> state;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 1. 创建 store 对象</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> store = Redux.createStore(reducer);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 4. 定义 action</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> increment = &#123; type: <span class="string">'increment'</span> &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> decrement = &#123; type: <span class="string">'decrement'</span> &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 5. 获取按钮 给按钮添加点击事件</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'plus'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 6. 触发action</span></span></span><br><span class="line">      store.dispatch(increment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'minus'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 6. 触发action</span></span></span><br><span class="line">      store.dispatch(decrement);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 7. 订阅 store</span></span></span><br><span class="line"><span class="javascript">    store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 获取store对象中存储的状态</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// console.log(store.getState());</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">'count'</span>).innerHTML = store.getState().count;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-Redux核心API总结"><a href="#7-Redux核心API总结" class="headerlink" title="7.Redux核心API总结"></a>7.Redux核心API总结</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 Store 状态容器</span></span><br><span class="line"><span class="keyword">const</span> store = Redux.createStore(reducer)</span><br><span class="line"><span class="comment">// 创建用于处理状态的 reducer 函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span> (<span class="params">state = initialState, action</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 获取状态</span></span><br><span class="line">store.getState();</span><br><span class="line"><span class="comment">// 订阅状态</span></span><br><span class="line">store.subscribe(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 触发 Action</span></span><br><span class="line">store.dispatch(&#123;<span class="attr">type</span>:<span class="string">'description...'</span>&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="8-在React中使用Redux解决的问题"><a href="#8-在React中使用Redux解决的问题" class="headerlink" title="8.在React中使用Redux解决的问题"></a>8.在React中使用Redux解决的问题</h3><blockquote>
<p>在 React 中不使用 Redux 时遇到的问题</p>
</blockquote>
<p>在 React 在组件通信的数据流是单向的，顶层组件可以通过 props 属性向下层组件传递数据，而下层组件不能向上层组件传递数据，要实现下层组件修改数据，需要上层组件传递修改数据的方法到下层组件，当项目越来越大的时候，组件之间传递数据变得越来越困难。</p>
<blockquote>
<p>在 React 项目中加入 Redux 的好处</p>
</blockquote>
<p>使用 Redux 管理数据，由于 Store 独立于组件，使得数据管理独立于组件，解决了组件与组件之间传递数据困难的问题。</p>
<h3 id="9-React-计数器"><a href="#9-React-计数器" class="headerlink" title="9.React 计数器"></a>9.React 计数器</h3><blockquote>
<p>下载 Redux</p>
</blockquote>
<ul>
<li>npm install redux react-redux</li>
</ul>
<blockquote>
<p>Redux 工作流程</p>
</blockquote>
<ul>
<li>1.组件通过 dispatch 方法触发 Action</li>
<li>2.Store 接收 Action 并将 Action 分发给 Reducer</li>
<li>3.Reducer 根据 Action 类型对状态进行更改并将更改后的状态返回给 Store</li>
<li>4.组件订阅了 Store 中的状态，Store中的状态更新会同步到组件</li>
</ul>
<h3 id="10-Provider组件与connect方法"><a href="#10-Provider组件与connect方法" class="headerlink" title="10.Provider组件与connect方法"></a>10.Provider组件与connect方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.js */</span></span><br><span class="line">    <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line">    <span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line">    <span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line">    <span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line">    <span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">'./components/Counter'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> initialState = &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reducer</span> (<span class="params">state = initialState, action</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'increment'</span>:</span><br><span class="line">          <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'decrement'</span>:</span><br><span class="line">          <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> store = Redux.createStore(reducer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// const increment = &#123; type: 'increment' &#125;;</span></span><br><span class="line">    <span class="comment">// const decrement = &#123; type: 'decrement' &#125;;</span></span><br><span class="line"></span><br><span class="line">    ReactDOM.render(</span><br><span class="line">        &lt;Provider store=&#123;store&#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span>&lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">        document.getElementById('root')</span></span><br><span class="line"><span class="regexp">    )</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Counter.js */</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> props.dispatch(&#123; type: 'increment' &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> props.dispatch(&#123; type: 'decrement' &#125;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. connect 方法会帮助我们订阅store 当store中的状态发生更改的时候 会帮助我们重新渲染组件</span></span><br><span class="line"><span class="comment">// 2. connect 方法可以让我们获取store中的状态 将状态通过组件的props属性映射给组件</span></span><br><span class="line"><span class="comment">// 3. connect 方法可以让我们获取 dispatch 方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">  count: state.count</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(Counter);</span><br></pre></td></tr></table></figure>

<h3 id="11-使用connect方法的第二个参数简化组件视图"><a href="#11-使用connect方法的第二个参数简化组件视图" class="headerlink" title="11.使用connect方法的第二个参数简化组件视图"></a>11.使用connect方法的第二个参数简化组件视图</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Counter.js */</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span> (<span class="params">&#123;count, increment, decrement&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;decrement&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. connect 方法会帮助我们订阅store 当store中的状态发生更改的时候 会帮助我们重新渲染组件</span></span><br><span class="line"><span class="comment">// 2. connect 方法可以让我们获取store中的状态 将状态通过组件的props属性映射给组件</span></span><br><span class="line"><span class="comment">// 3. connect 方法可以让我们获取 dispatch 方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">  count: state.count</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> (&#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">        dispatch(&#123; <span class="attr">type</span>: <span class="string">'increment'</span> &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement() &#123;</span><br><span class="line">        dispatch(&#123; <span class="attr">type</span>: <span class="string">'decrement'</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Counter);</span><br></pre></td></tr></table></figure>

<h3 id="12-bindActionsCreators方法的使用"><a href="#12-bindActionsCreators方法的使用" class="headerlink" title="12.bindActionsCreators方法的使用"></a>12.bindActionsCreators方法的使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Counter.js */</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> counterActions <span class="keyword">from</span> <span class="string">'../store/actions/counter.actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span> (<span class="params">&#123;count, increment, decrement&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;decrement&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. connect 方法会帮助我们订阅store 当store中的状态发生更改的时候 会帮助我们重新渲染组件</span></span><br><span class="line"><span class="comment">// 2. connect 方法可以让我们获取store中的状态 将状态通过组件的props属性映射给组件</span></span><br><span class="line"><span class="comment">// 3. connect 方法可以让我们获取 dispatch 方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">  count: state.count</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> bindActionCreators(counterActions, dispatch)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Counter);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/actions/counter.action.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'increment'</span> &#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> decrement = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'decrement'</span> &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="13-代码重构"><a href="#13-代码重构" class="headerlink" title="13.代码重构"></a>13.代码重构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.js */</span></span><br><span class="line">    <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line">    <span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line">    <span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line">    <span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">'./components/Counter'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">'./store/index'</span>;</span><br><span class="line">    </span><br><span class="line">    ReactDOM.render(</span><br><span class="line">        &lt;Provider store=&#123;store&#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span>&lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">        document.getElementById('root')</span></span><br><span class="line"><span class="regexp">    )</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducers/counter.reducer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = Redux.createStore(reducer);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/reducers/counter.reducer.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;INCREMENT,DECREMENT&#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> initialState = &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = initialState, action) =&gt; &#123;</span><br><span class="line">      <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> INCREMENT:</span><br><span class="line">          <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">case</span> DECREMENT:</span><br><span class="line">          <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/const/counter.const.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> INCREMENT = <span class="string">'increment'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DECREMENT = <span class="string">'decrement'</span>;</span><br></pre></td></tr></table></figure>



<h3 id="14-Action-js"><a href="#14-Action-js" class="headerlink" title="14.Action```js"></a>14.Action```js</h3><p>// store/actions/counter.action.js<br>import {INCREMENT,DECREMENT} from ‘../const/counter.const’<br>export const increment = () =&gt; ({ type: INCREMENT });<br>export const decrement = () =&gt; ({ type: DECREMENT });</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;js</span><br><span class="line">&#x2F;&#x2F; 传递参数</span><br><span class="line">&lt;button onClick&#x3D;&#123;()&#x3D;&gt;increment(5)&#125;&gt;+1&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接收参数，传递 reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123;<span class="attr">type</span>: INCREMENT, payload&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="15-redux实现弹出框案例"><a href="#15-redux实现弹出框案例" class="headerlink" title="15.redux实现弹出框案例"></a>15.redux实现弹出框案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modal.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> modalActions <span class="keyword">from</span> <span class="string">'../store/actions/modal.actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Modal</span>(<span class="params">&#123;showStatus,show,hide&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> styles = &#123;</span><br><span class="line">        width: <span class="number">200</span>,</span><br><span class="line">        height: <span class="number">200</span>,</span><br><span class="line">        position: <span class="string">'absolute'</span>,</span><br><span class="line">        left: <span class="string">'50%'</span>,</span><br><span class="line">        top: <span class="string">'50%'</span>,</span><br><span class="line">        marginLeft: <span class="number">-100</span>,</span><br><span class="line">        marginTop: <span class="number">-100</span>,</span><br><span class="line">        backgroundColor: <span class="string">'skyblue'</span>,</span><br><span class="line">        display: showStatus ? <span class="string">'block'</span>:<span class="string">'none'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;show&#125;</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;hide&#125;</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">    showStatus: state.show</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> bindActionCreators(modalActions,dispatch)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Modal);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.js */</span></span><br><span class="line">    <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line">    <span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line">    <span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">'./store/index'</span>;</span><br><span class="line">    </span><br><span class="line">    ReactDOM.render(</span><br><span class="line">        &lt;Provider store=&#123;store&#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>&lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">        document.getElementById('root')</span></span><br><span class="line"><span class="regexp">    )</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">'./components/Counter'</span>;</span><br><span class="line"><span class="keyword">import</span> Modal <span class="keyword">from</span> <span class="string">'./components/modal'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Modal</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/reducers/counter.reducer.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; INCREMENT,DECREMENT &#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; SHOWMODAL, HIDEMODAL &#125; <span class="keyword">from</span> <span class="string">'../const/modal.const'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> initialState = &#123;</span><br><span class="line">      count: <span class="number">0</span>,</span><br><span class="line">      show: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = initialState, action) =&gt; &#123;</span><br><span class="line">      <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> INCREMENT:</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              ...state,</span><br><span class="line">                count: state.count + <span class="number">1</span></span><br><span class="line">              &#125;</span><br><span class="line">        <span class="keyword">case</span> DECREMENT:</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              ...state,</span><br><span class="line">                count: state.count - <span class="number">1</span></span><br><span class="line">              &#125;</span><br><span class="line">        <span class="keyword">case</span> SHOWMODAL:</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              ...state,</span><br><span class="line">              show: <span class="literal">true</span></span><br><span class="line">          &#125;  </span><br><span class="line">        <span class="keyword">case</span> HIDEMODAL:</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              ...state,</span><br><span class="line">              show: <span class="literal">false</span></span><br><span class="line">          &#125; </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modal.actions.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; SHOWMODAL, HIDEMODAL &#125; <span class="keyword">from</span> <span class="string">'../const/modal.const'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> show = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: SHOWMODAL &#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hide = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: HIDEMODAL &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modal.const.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SHOWMODAL = <span class="string">'showModal'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> HIDEMODAL = <span class="string">'hideModal'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="16-拆分合并reducer"><a href="#16-拆分合并reducer" class="headerlink" title="16.拆分合并reducer"></a>16.拆分合并reducer</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modal.reducer.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; SHOWMODAL, HIDEMODAL &#125; <span class="keyword">from</span> <span class="string">'../const/modal.const'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> initialState = &#123;</span><br><span class="line">      show: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = initialState, action) =&gt; &#123;</span><br><span class="line">      <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> SHOWMODAL:</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              ...state,</span><br><span class="line">              show: <span class="literal">true</span></span><br><span class="line">          &#125;  </span><br><span class="line">        <span class="keyword">case</span> HIDEMODAL:</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">              ...state,</span><br><span class="line">              show: <span class="literal">false</span></span><br><span class="line">          &#125; </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// root.reducer.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> CounterReducer <span class="keyword">from</span> <span class="string">'./counter.reducer'</span>;</span><br><span class="line"><span class="keyword">import</span> ModalReducer <span class="keyword">from</span> <span class="string">'./modal.reducer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">    counter: CounterReducer,</span><br><span class="line">    modal: ModalReducer</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> RootReducer <span class="keyword">from</span> <span class="string">'./reducers/root.reducer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = createStore(RootReducer);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modal.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> modalActions <span class="keyword">from</span> <span class="string">'../store/actions/modal.actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Modal</span>(<span class="params">&#123;showStatus,show,hide&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> styles = &#123;</span><br><span class="line">        width: <span class="number">200</span>,</span><br><span class="line">        height: <span class="number">200</span>,</span><br><span class="line">        position: <span class="string">'absolute'</span>,</span><br><span class="line">        left: <span class="string">'50%'</span>,</span><br><span class="line">        top: <span class="string">'50%'</span>,</span><br><span class="line">        marginLeft: <span class="number">-100</span>,</span><br><span class="line">        marginTop: <span class="number">-100</span>,</span><br><span class="line">        backgroundColor: <span class="string">'skyblue'</span>,</span><br><span class="line">        display: showStatus ? <span class="string">'block'</span>:<span class="string">'none'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;show&#125;</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;hide&#125;</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">    showStatus: state.modal.show</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> bindActionCreators(modalActions,dispatch)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Modal);</span><br></pre></td></tr></table></figure>
<h3 id="17-中间件概念介绍"><a href="#17-中间件概念介绍" class="headerlink" title="17.中间件概念介绍"></a>17.中间件概念介绍</h3><blockquote>
<p>什么是中间件</p>
</blockquote>
<p>中间件允许我们扩展 redux 应用程序</p>
<h3 id="18-开发Redux中间件"><a href="#18-开发Redux中间件" class="headerlink" title="18.开发Redux中间件"></a>18.开发Redux中间件</h3><blockquote>
<p>开发 Redux 中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开发中间件的模板代码</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store =&gt; <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注册中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 中间件在开发完成以后只有被注册才能在 Redux 的工作流程中生效</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">'./middlewares/logger'</span>;</span><br><span class="line"></span><br><span class="line">createStore(reducer, applyMiddleware(logger))</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logger.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store =&gt; <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(store)</span><br><span class="line">   <span class="built_in">console</span>.log(action)</span><br><span class="line">   next()</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store =&gt; <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'test中间件被执行了~'</span>)</span><br><span class="line">   next()</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> RootReducer <span class="keyword">from</span> <span class="string">'./reducers/root.reducer'</span>;</span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">'./middlewares/logger'</span>;</span><br><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">'./middlewares/test'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = createStore(RootReducer,applyMiddleware(logger, test));</span><br></pre></td></tr></table></figure>
<h3 id="19-Redux中间件开发实例thunk"><a href="#19-Redux中间件开发实例thunk" class="headerlink" title="19.Redux中间件开发实例thunk"></a>19.Redux中间件开发实例thunk</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// thunk.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123;dispatch&#125;) =&gt; <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 1.当前这个中间件函数不关心你想执行什么样的异步操作，只关心你执行的是不是异步操作</span></span><br><span class="line">    <span class="comment">// 2.如果你执行的是异步操作，你在触发 action 的时候，给我传递一个函数，如果执行的是同步操作，就传递 action 对象</span></span><br><span class="line">    <span class="comment">// 3.异步操作代码要写在你传递进来的函数中</span></span><br><span class="line">    <span class="comment">// 4.当前这个中间件函数在调用你传递进来的函数时，要将 dispatch 方法传递过去</span></span><br><span class="line">    <span class="keyword">if</span>(type action === <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> action(dispatch)</span><br><span class="line">    &#125;</span><br><span class="line">    next(action)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> RootReducer <span class="keyword">from</span> <span class="string">'./reducers/root.reducer'</span>;</span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">'./middlewares/logger'</span>;</span><br><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">'./middlewares/test'</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">'./middlewares/thunk'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = createStore(RootReducer,applyMiddleware(logger, test, thunk));</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/actions/counter.action.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;INCREMENT,DECREMENT&#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123; <span class="attr">type</span>: INCREMENT &#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> decrement = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123; <span class="attr">type</span>: DECREMENT &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment_async = <span class="function"><span class="params">payload</span> =&gt;</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        dispatch(increment(payload))</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Counter.js */</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> counterActions <span class="keyword">from</span> <span class="string">'../store/actions/counter.actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span> (<span class="params">&#123;count, increment, decrement, increment_async&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> increment_async(5)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> decrement(5)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. connect 方法会帮助我们订阅store 当store中的状态发生更改的时候 会帮助我们重新渲染组件</span></span><br><span class="line"><span class="comment">// 2. connect 方法可以让我们获取store中的状态 将状态通过组件的props属性映射给组件</span></span><br><span class="line"><span class="comment">// 3. connect 方法可以让我们获取 dispatch 方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">  count: state.count</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> bindActionCreators(counterActions, dispatch)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(Counter);</span><br></pre></td></tr></table></figure>

<h3 id="20-Redux-thunk中间件的使用"><a href="#20-Redux-thunk中间件的使用" class="headerlink" title="20.Redux-thunk中间件的使用"></a>20.Redux-thunk中间件的使用</h3><blockquote>
<p>Redux 常用中间件</p>
</blockquote>
<ul>
<li>下载 redux-thunk  </li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install redux-thunk</span><br></pre></td></tr></table></figure>

<ul>
<li>引入 redux-thunk  </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">'redux-thunk'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>注册 redux-thunk</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line">createStore(rootReducer, applyMiddleware(thunk));</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 redux-thunk 中间件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadPosts = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">async</span> dispatch =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> posts = <span class="keyword">await</span> axios.get(<span class="string">'./api/posts'</span>).then(response.data);</span><br><span class="line">    dispatch(&#123;<span class="attr">type</span>: LOADPOSTSSUCCESS, <span class="attr">payload</span>: posts&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="21-Redux-saga中间件的使用"><a href="#21-Redux-saga中间件的使用" class="headerlink" title="21.Redux-saga中间件的使用"></a>21.Redux-saga中间件的使用</h3><blockquote>
<p>redux-saga 解决的问题</p>
</blockquote>
<ul>
<li>redux-saga 可以将异步操作从 Action Creator 文件中抽离出来，放在一个单独的文件中</li>
</ul>
<blockquote>
<p>redux-saga 下载</p>
</blockquote>
<ul>
<li>npm install redux-saga</li>
</ul>
<blockquote>
<p>创建 redux-saga 中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">'redux-saga'</span>;</span><br><span class="line"><span class="keyword">const</span> sagaMiddleware = createSagaMiddleware();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注册 sagaMiddleware</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createStore(reducer,applyMiddleware(sagaMiddleware))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用 saga 接收 action 执行异步操作</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; takeEvery, put &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">load_posts</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">yield</span> axios.get(<span class="string">'/api/posts.json'</span>);</span><br><span class="line">    <span class="keyword">yield</span> put(load_posts_success(data));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* <span class="title">postSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> takeEvery(LOAD_POSTS, load_posts)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>启动 saga</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> postSaga <span class="keyword">from</span> <span class="string">'./store/sagas/post.saga'</span>;</span><br><span class="line">sagaMiddleware.run(postSaga);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> RootReducer <span class="keyword">from</span> <span class="string">'./reduers/root.reducer'</span>;</span><br><span class="line"><span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">'redux-saga'</span>;</span><br><span class="line"><span class="keyword">import</span> counterSaga <span class="keyword">from</span> <span class="string">'./sagas/counter.saga'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sagaMiddleware = createSagaMiddleware();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = createStore(RootReducer, applyMiddleware(sagaMiddleware))</span><br><span class="line"></span><br><span class="line">sagaMiddleware.run(counterSaga)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter.saga.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; takeEvery, put, delay &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; increment &#125; <span class="keyword">from</span> <span class="string">'../actions/counter.actions'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; INCREMENT_ASYNC &#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span>;</span><br><span class="line"><span class="comment">// takeEvery 接收 action</span></span><br><span class="line"><span class="comment">// put 触发 action</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">increment_async_fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> delay(<span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">yield</span> put(increment(<span class="number">10</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* <span class="title">counterSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> takeEvery(INCREMENT_ASYNC, increment_async_fn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter.action.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; INCREMENT, DECREMENT, INCREMENT_ASYNC &#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123;<span class="attr">type</span>: INCREMENT, payload&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> decrement = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123;<span class="attr">type</span>: DECREMENT, payload&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment_async = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;<span class="attr">type</span>: INCREMENT_ASYNC&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="22-Redux-saga中的action传参"><a href="#22-Redux-saga中的action传参" class="headerlink" title="22.Redux-saga中的action传参"></a>22.Redux-saga中的action传参</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter.action.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; INCREMENT, DECREMENT, INCREMENT_ASYNC &#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123;<span class="attr">type</span>: INCREMENT, payload&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> decrement = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123;<span class="attr">type</span>: DECREMENT, payload&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment_async = <span class="function"><span class="params">payload</span> =&gt;</span> (&#123;<span class="attr">type</span>: INCREMENT_ASYNC, payload&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter.saga.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; takeEvery, put, delay &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; increment &#125; <span class="keyword">from</span> <span class="string">'../actions/counter.actions'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; INCREMENT_ASYNC &#125; <span class="keyword">from</span> <span class="string">'../const/counter.const'</span>;</span><br><span class="line"><span class="comment">// takeEvery 接收 action</span></span><br><span class="line"><span class="comment">// put 触发 action</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">increment_async_fn</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> delay(<span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">yield</span> put(increment(action.payload))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* <span class="title">counterSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> takeEvery(INCREMENT_ASYNC, increment_async_fn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="23-saga文件的拆分与合并"><a href="#23-saga文件的拆分与合并" class="headerlink" title="23.saga文件的拆分与合并"></a>23.saga文件的拆分与合并</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// root.saga.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; all &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span>;</span><br><span class="line"><span class="keyword">import</span> counterSaga <span class="keyword">from</span> <span class="string">'./counter.saga'</span>;</span><br><span class="line"><span class="keyword">import</span> modalSaga <span class="keyword">from</span> <span class="string">'./modal.saga'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* <span class="title">rootSaga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> all([</span><br><span class="line">        counterSaga(),</span><br><span class="line">        modalSaga()</span><br><span class="line">    ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="24-redux-actions中间件的使用"><a href="#24-redux-actions中间件的使用" class="headerlink" title="24.redux-actions中间件的使用"></a>24.redux-actions中间件的使用</h3><blockquote>
<p>redux-actions 解决的问题</p>
</blockquote>
<p>redux 流程中大量的样板代码读写很痛苦，使用 redux-actions 可以简化 Action 和 Reducer 的处理。</p>
<blockquote>
<p>redux-actions 下载</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install redux-actions</span><br></pre></td></tr></table></figure>
<blockquote>
<p>创建 Action</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createAction &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</span><br><span class="line"><span class="keyword">const</span> increment_action = createAction(<span class="string">'increment'</span>);</span><br><span class="line"><span class="keyword">const</span> decrement_action = createAction(<span class="string">'decrement'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>创建 Reducer</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; handleActions <span class="keyword">as</span> createReducer &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; increment_action, decrement_action &#125; <span class="keyword">from</span> <span class="string">'../actions/counter.action'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> counterReducer = createReducer(&#123;</span><br><span class="line">    [increment_action]:<span class="function">(<span class="params">state,action</span>) =&gt;</span> (&#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;),</span><br><span class="line">    [decrement_action]:<span class="function">(<span class="params">state,action</span>) =&gt;</span> (&#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;)</span><br><span class="line">&#125;,initialState);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counterReducer;</span><br></pre></td></tr></table></figure>

<h3 id="25-shopping项目初始化"><a href="#25-shopping项目初始化" class="headerlink" title="25.shopping项目初始化"></a>25.shopping项目初始化</h3><ul>
<li>create-react-app shopping</li>
</ul>
<h3 id="26-shopping项目搭建redux工作流"><a href="#26-shopping项目搭建redux工作流" class="headerlink" title="26.shopping项目搭建redux工作流"></a>26.shopping项目搭建redux工作流</h3><ul>
<li>npm install redux react-redux redux-saga redux-actions</li>
</ul>
<h3 id="27-实现商品列表数据展示"><a href="#27-实现商品列表数据展示" class="headerlink" title="27.实现商品列表数据展示"></a>27.实现商品列表数据展示</h3><h3 id="28-将商品加入到购物车中"><a href="#28-将商品加入到购物车中" class="headerlink" title="28.将商品加入到购物车中"></a>28.将商品加入到购物车中</h3><h3 id="29-购物车列表数据展示"><a href="#29-购物车列表数据展示" class="headerlink" title="29.购物车列表数据展示"></a>29.购物车列表数据展示</h3><h3 id="30-从购物车中删除商品"><a href="#30-从购物车中删除商品" class="headerlink" title="30.从购物车中删除商品"></a>30.从购物车中删除商品</h3><h3 id="31-更改购物车中商品的数量"><a href="#31-更改购物车中商品的数量" class="headerlink" title="31.更改购物车中商品的数量"></a>31.更改购物车中商品的数量</h3><h3 id="32-更正视图图片显示错误问题"><a href="#32-更正视图图片显示错误问题" class="headerlink" title="32.更正视图图片显示错误问题"></a>32.更正视图图片显示错误问题</h3><h3 id="33-计算商品总价"><a href="#33-计算商品总价" class="headerlink" title="33.计算商品总价"></a>33.计算商品总价</h3><h3 id="34-Redux源码实现：核心逻辑"><a href="#34-Redux源码实现：核心逻辑" class="headerlink" title="34.Redux源码实现：核心逻辑"></a>34.Redux源码实现：核心逻辑</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myRedux.js</span></span><br><span class="line"><span class="comment">/* createStore(reducer, preloadedState, enhancer)</span></span><br><span class="line"><span class="comment">&#123; getState, dispatch, subscribe &#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer,preloadedState</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// store 对象中存储的状态</span></span><br><span class="line">    <span class="keyword">var</span> currentState = preloadedState;</span><br><span class="line">    <span class="comment">// 存放订阅者函数</span></span><br><span class="line">    <span class="keyword">var</span> currentListeners = [];</span><br><span class="line">    <span class="comment">// 获取状态</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentState;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 触发 action</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">        currentState = reducer(currentState, action);</span><br><span class="line">        <span class="comment">// 循环数组 调用订阅者</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; currentListeners.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 获取订阅者</span></span><br><span class="line">            <span class="keyword">var</span> listener = currentListeners[i];</span><br><span class="line">            listener();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 订阅状态</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>)</span>&#123;</span><br><span class="line">        currentListeners.push(listener);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getState,</span><br><span class="line">        dispatch,</span><br><span class="line">        subscribe</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="35-Redux源码实现：参数类型约束"><a href="#35-Redux源码实现：参数类型约束" class="headerlink" title="35.Redux源码实现：参数类型约束"></a>35.Redux源码实现：参数类型约束</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myRedux.js</span></span><br><span class="line"><span class="comment">/* createStore(reducer, preloadedState, enhancer)</span></span><br><span class="line"><span class="comment">&#123; getState, dispatch, subscribe &#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer,preloadedState</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 约束 reducer 参数类型</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> reducer !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'reducer必须是函数'</span>);</span><br><span class="line">    <span class="comment">// store 对象中存储的状态</span></span><br><span class="line">    <span class="keyword">var</span> currentState = preloadedState;</span><br><span class="line">    <span class="comment">// 存放订阅者函数</span></span><br><span class="line">    <span class="keyword">var</span> currentListeners = [];</span><br><span class="line">    <span class="comment">// 获取状态</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentState;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 触发 action</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 判断 action 是否是对象</span></span><br><span class="line">        <span class="keyword">if</span>(!isPlainObject(action)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'action必须是对象'</span>);</span><br><span class="line">        <span class="comment">// 判断对象中是否具有 type 属性</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> action.type === <span class="string">'undefined'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'action对象中必须要有type属性'</span>)</span><br><span class="line">        currentState = reducer(currentState, action);</span><br><span class="line">        <span class="comment">// 循环数组 调用订阅者</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; currentListeners.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 获取订阅者</span></span><br><span class="line">            <span class="keyword">var</span> listener = currentListeners[i];</span><br><span class="line">            listener();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 订阅状态</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>)</span>&#123;</span><br><span class="line">        currentListeners.push(listener);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getState,</span><br><span class="line">        dispatch,</span><br><span class="line">        subscribe</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断obj参数是否是对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 排除基本数据类型和null</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !==<span class="string">'object'</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 区分数组和对象 原型对象对比的方式</span></span><br><span class="line">    <span class="keyword">var</span> proto = obj;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">Object</span>.getPrototypeOf(proto)!==<span class="literal">null</span>)&#123;</span><br><span class="line">        proto = <span class="built_in">Object</span>.getPrototypeOf(proto)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.getPrototypeOf(obj) === proto</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="36-Redux源码实现：Enhancer"><a href="#36-Redux源码实现：Enhancer" class="headerlink" title="36.Redux源码实现：Enhancer"></a>36.Redux源码实现：Enhancer</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myRedux.js</span></span><br><span class="line"><span class="comment">/* createStore(reducer, preloadedState, enhancer)</span></span><br><span class="line"><span class="comment">&#123; getState, dispatch, subscribe &#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer,preloadedState,enhancer</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 约束 reducer 参数类型</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> reducer !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'reducer必须是函数'</span>);</span><br><span class="line">    <span class="comment">// 判断 enhancer 参数有没有传递</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> enhancer !== <span class="string">'undifined'</span>) &#123;</span><br><span class="line">    <span class="comment">// 判断 enhancer 是不是一个函数</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> enhancer !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'enhancer 必须是函数'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> enhancer(createStore)(reducer,preloadedState)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// store 对象中存储的状态</span></span><br><span class="line">    <span class="keyword">var</span> currentState = preloadedState;</span><br><span class="line">    <span class="comment">// 存放订阅者函数</span></span><br><span class="line">    <span class="keyword">var</span> currentListeners = [];</span><br><span class="line">    <span class="comment">// 获取状态</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentState;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 触发 action</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 判断 action 是否是对象</span></span><br><span class="line">        <span class="keyword">if</span>(!isPlainObject(action)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'action必须是对象'</span>);</span><br><span class="line">        <span class="comment">// 判断对象中是否具有 type 属性</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> action.type === <span class="string">'undefined'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'action对象中必须要有type属性'</span>)</span><br><span class="line">        currentState = reducer(currentState, action);</span><br><span class="line">        <span class="comment">// 循环数组 调用订阅者</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; currentListeners.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 获取订阅者</span></span><br><span class="line">            <span class="keyword">var</span> listener = currentListeners[i];</span><br><span class="line">            listener();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 订阅状态</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>)</span>&#123;</span><br><span class="line">        currentListeners.push(listener);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getState,</span><br><span class="line">        dispatch,</span><br><span class="line">        subscribe</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断obj参数是否是对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 排除基本数据类型和null</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !==<span class="string">'object'</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 区分数组和对象 原型对象对比的方式</span></span><br><span class="line">    <span class="keyword">var</span> proto = obj;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">Object</span>.getPrototypeOf(proto)!==<span class="literal">null</span>)&#123;</span><br><span class="line">        proto = <span class="built_in">Object</span>.getPrototypeOf(proto)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.getPrototypeOf(obj) === proto</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="37-Redux源码实现：applyMiddleware"><a href="#37-Redux源码实现：applyMiddleware" class="headerlink" title="37.Redux源码实现：applyMiddleware"></a>37.Redux源码实现：applyMiddleware</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">applyMiddleware</span>(<span class="params">...middlewares</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">createStore</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">reducer,preloadedState</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// 创建 store</span></span><br><span class="line">      <span class="keyword">var</span> store = createStore(reducer, preloadedState) &#123;</span><br><span class="line">        <span class="comment">// 阉割版的 store</span></span><br><span class="line">      <span class="keyword">var</span> middlewareAPI = &#123;</span><br><span class="line">          getSttate: store.getState,</span><br><span class="line">          dispatch: store.dispatch</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用中间件的第一层函数 产地阉割版的 store 对象</span></span><br><span class="line">        <span class="keyword">var</span> chain = middlewares.map(<span class="function"><span class="params">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class="line">        <span class="keyword">var</span> dispatch = compose(...chain)(store.dispatch)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...store,</span><br><span class="line">          dispatch</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> funcs = [...arguments];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">dispatch</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = funcs.length <span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">      dispatch = funcs[i](dispatch)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dispatch</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="38-Redux源码实现：bindActionCreators"><a href="#38-Redux源码实现：bindActionCreators" class="headerlink" title="38.Redux源码实现：bindActionCreators"></a>38.Redux源码实现：bindActionCreators</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindActionCreators</span>(<span class="params">actionCreators, dispatch</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> boundActionCreators = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> actionCreators) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">key</span>)</span>&#123;</span><br><span class="line">      boundActionCreators[key] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        dispatch(actionCreators[key]())</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)(key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="39-Redux源码实现：combineReducers"><a href="#39-Redux源码实现：combineReducers" class="headerlink" title="39.Redux源码实现：combineReducers"></a>39.Redux源码实现：combineReducers</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combineReducers</span>(<span class="params">reducers</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 1.检查 reducer 类型 它必须是函数</span></span><br><span class="line">  <span class="keyword">var</span> reducerKeys = <span class="built_in">Object</span>.key(reducers);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;reducerKeys.length;i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> key = reducerKeys[i];</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> reducers[key] !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">''</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2.调用一个一个的小的 reducer 将每一个小的 reducer 中返回的状态存储在一个新的大的对象中</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">state,action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nextState = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; reduceKeys.length; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> key = reduceKeys[i];</span><br><span class="line">      <span class="keyword">var</span> reducer = reducers[key];</span><br><span class="line">      <span class="keyword">var</span> previousStateForKey = state[key];</span><br><span class="line">      nextState[key] = reducer(previousStateForKey, action)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nextState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="任务二：MobX"><a href="#任务二：MobX" class="headerlink" title="任务二：MobX"></a>任务二：MobX</h2><h3 id="1-【课程资料】课程资料"><a href="#1-【课程资料】课程资料" class="headerlink" title="1.【课程资料】课程资料"></a>1.【课程资料】课程资料</h3><h3 id="2-MobX专题内容介绍"><a href="#2-MobX专题内容介绍" class="headerlink" title="2.MobX专题内容介绍"></a>2.MobX专题内容介绍</h3><ul>
<li>MobX 简介</li>
<li>开发前的准备</li>
<li>MobX + React</li>
<li>MobX 异步</li>
<li>MobX 数据监测</li>
<li>综合案例</li>
</ul>
<h3 id="3-MobX简介"><a href="#3-MobX简介" class="headerlink" title="3.MobX简介"></a>3.MobX简介</h3><blockquote>
<p>MobX 介绍</p>
</blockquote>
<ul>
<li>简单、可扩展的状态管理库</li>
<li>MobX 是由 Mendix，Coinbasa。Facebook 开源和众多个人赞助商所赞助的</li>
<li>React 和 MobX 是一对强力组合，React 负责渲染应用的状态，MobX 负责管理应用状态供 React 使用</li>
</ul>
<blockquote>
<p>MobX 浏览器支持</p>
</blockquote>
<ul>
<li>MobX 5 版本运行在任何支持 ES6 proxy 的浏览器，不支持 IE11，Node.js 6</li>
<li>MobX 4 可以运行在任何支持 ES5 的浏览器上</li>
<li>MobX 4 和 5 的 API 是相同的</li>
</ul>
<h3 id="4-开发前的准备工作"><a href="#4-开发前的准备工作" class="headerlink" title="4.开发前的准备工作"></a>4.开发前的准备工作</h3><blockquote>
<p>启用装饰器语法支持（方式一）</p>
</blockquote>
<ul>
<li>1.弹射项目底层配置：npm run eject</li>
<li>2.下载装饰器语法 babel 插件：npm install @babel/plugin-proposal-decorators</li>
<li>3.在 pacakage.json 文件中加入配置</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"babel"</span>: &#123;</span><br><span class="line">    <span class="string">"plugins"</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">"@babel/plugin-roposal-decorators"</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"legacy"</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>启用装饰器语法支持（方式二）</p>
</blockquote>
<ul>
<li><ol>
<li>npm install react-app-rewired customize-cra @babel/plugin-proposal-decorators</li>
</ol>
</li>
<li>2.在项目根目录下创建 config-overrides.js 并加入配置</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; override, assDecoratorsLegacy &#125; = <span class="built_in">require</span>(<span class="string">"customize-cra"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = override(addDecoratorsLegacy());</span><br></pre></td></tr></table></figure>
<blockquote>
<p>解决 vscode 编辑器关于装饰器语法的警告</p>
</blockquote>
<ul>
<li>修改配置：”javascript.implivitProjectConfig.experimentalDecorators”:true</li>
</ul>
<h3 id="5-mobx使用-一"><a href="#5-mobx使用-一" class="headerlink" title="5.mobx使用(一)"></a>5.mobx使用(一)</h3><blockquote>
<p>下载 MboX</p>
</blockquote>
<ul>
<li>npm install mobx mobx-react</li>
</ul>
<blockquote>
<p>MobX 工作流程</p>
</blockquote>
<ul>
<li>Action =&gt; state =&gt; views</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/counterStore.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建 store 对象 存储默认状态</span></span><br><span class="line"><span class="comment">// 2.将 store 对象放在一个全局的 组件可以够得到的地方</span></span><br><span class="line"><span class="comment">// 3.让组件获取 store 对象中的状态 并将状态显示在组件中</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterStore</span> </span>&#123;</span><br><span class="line">    count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> CounterStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counter;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span>;</span><br><span class="line"></span><br><span class="line">@inject(<span class="string">'counter'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; counter &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;counter.count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"><span class="keyword">import</span> counter <span class="keyword">from</span> <span class="string">'./stores/counterStore'</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;Provider counter = &#123;counter&#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>&lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">    document.getElementById('root')</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>
<h3 id="6-mobx使用-二"><a href="#6-mobx使用-二" class="headerlink" title="6.mobx使用(二)"></a>6.mobx使用(二)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject, observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span>;</span><br><span class="line"></span><br><span class="line">@inject(<span class="string">'counter'</span>)</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; counter &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;counter.increment&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;counter.count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;counter.decrement&#125;</span>&gt;</span>_<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/counterStore.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建 store 对象 存储默认状态</span></span><br><span class="line"><span class="comment">// 2.将 store 对象放在一个全局的 组件可以够得到的地方</span></span><br><span class="line"><span class="comment">// 3.让组件获取 store 对象中的状态 并将状态显示在组件中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; observable &#125; <span class="keyword">from</span> <span class="string">'mobx'</span> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterStore</span> </span>&#123;</span><br><span class="line">    @observable count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    increment = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    decrement = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> CounterStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counter;</span><br></pre></td></tr></table></figure>

<h3 id="7-更正类中的普通函数的this指向"><a href="#7-更正类中的普通函数的this指向" class="headerlink" title="7.更正类中的普通函数的this指向"></a>7.更正类中的普通函数的this指向</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/counterStore.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建 store 对象 存储默认状态</span></span><br><span class="line"><span class="comment">// 2.将 store 对象放在一个全局的 组件可以够得到的地方</span></span><br><span class="line"><span class="comment">// 3.让组件获取 store 对象中的状态 并将状态显示在组件中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; observable, configure, action &#125; <span class="keyword">from</span> <span class="string">'mobx'</span> </span><br><span class="line">configure(&#123;<span class="attr">enforceActions</span>: <span class="string">'observed'</span>&#125;);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterStore</span> </span>&#123;</span><br><span class="line">    @observable count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    @action.bound increment() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @action.bound decrement() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> CounterStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counter;</span><br></pre></td></tr></table></figure>

<h3 id="8-异步更新状态方式一"><a href="#8-异步更新状态方式一" class="headerlink" title="8.异步更新状态方式一"></a>8.异步更新状态方式一</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/counterStore.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建 store 对象 存储默认状态</span></span><br><span class="line"><span class="comment">// 2.将 store 对象放在一个全局的 组件可以够得到的地方</span></span><br><span class="line"><span class="comment">// 3.让组件获取 store 对象中的状态 并将状态显示在组件中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; observable, configure, action, runInAction &#125; <span class="keyword">from</span> <span class="string">'mobx'</span> </span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line">configure(&#123;<span class="attr">enforceActions</span>: <span class="string">'observed'</span>&#125;);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterStore</span> </span>&#123;</span><br><span class="line">    @observable count = <span class="number">0</span>;</span><br><span class="line">    @observable users = [];</span><br><span class="line"></span><br><span class="line">    @action.bound increment() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @action.bound decrement() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @action.bound <span class="keyword">async</span> getDada() &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">await</span> axios.get(<span class="string">'https://api.github.com/users'</span>)</span><br><span class="line">      runInAction(<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">this</span>.users = data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> CounterStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counter;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject, observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span>;</span><br><span class="line"></span><br><span class="line">@inject(<span class="string">'counter'</span>)</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; getData &#125; = <span class="keyword">this</span>.props.counter;</span><br><span class="line">        getData()</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; counter &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;counter.increment&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;counter.count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;counter.decrement&#125;</span>&gt;</span>_<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">          &lt;div&gt;</span><br><span class="line">          &#123;counter.users.map(user =&gt;(</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;span&gt;&#123;user.id&#125;&lt;/span&gt;</span><br><span class="line">                &lt;span&gt;&#123;user.login&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>
<h3 id="9-异步更新状态方式二"><a href="#9-异步更新状态方式二" class="headerlink" title="9.异步更新状态方式二"></a>9.异步更新状态方式二</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/counterStore.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建 store 对象 存储默认状态</span></span><br><span class="line"><span class="comment">// 2.将 store 对象放在一个全局的 组件可以够得到的地方</span></span><br><span class="line"><span class="comment">// 3.让组件获取 store 对象中的状态 并将状态显示在组件中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; observable, configure, action, runInAction, flow &#125; <span class="keyword">from</span> <span class="string">'mobx'</span> </span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="comment">// 通过配置强制程序使用action函数更改应用程序中的状态</span></span><br><span class="line">configure(&#123;<span class="attr">enforceActions</span>: <span class="string">'observed'</span>&#125;);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterStore</span> </span>&#123;</span><br><span class="line">    @observable count = <span class="number">0</span>;</span><br><span class="line">    @observable users = [];</span><br><span class="line"></span><br><span class="line">    @action.bound increment() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @action.bound decrement() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="keyword">this</span>.count - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @action.bound async getDada() &#123;</span></span><br><span class="line">    <span class="comment">//   let &#123; data &#125; = await axios.get('https://api.github.com/users')</span></span><br><span class="line">    <span class="comment">//   runInAction(()=&gt;this.users = data);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    getData = flow(<span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">yield</span> axios.get(<span class="string">'https://api.github.com/users'</span>)</span><br><span class="line">        <span class="keyword">this</span>.users = data</span><br><span class="line">    &#125;).bind(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> CounterStore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counter;</span><br></pre></td></tr></table></figure>
<h3 id="10-数据监测computed"><a href="#10-数据监测computed" class="headerlink" title="10.数据监测computed"></a>10.数据监测computed</h3><blockquote>
<p>什么是计算值</p>
</blockquote>
<ul>
<li>计算值是可以根据现有的状态或其它计算值衍生出的值</li>
</ul>
<blockquote>
<p>什么时候使用计算值</p>
</blockquote>
<ul>
<li>将复杂的业务逻辑从模板中进行抽离</li>
</ul>
<blockquote>
<p>计算值示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action, computed &#125; <span class="keyword">from</span> <span class="string">'mobx'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BirdStore</span> </span>&#123;</span><br><span class="line">    @observable count = <span class="number">10</span>;</span><br><span class="line">    @observable price = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line">    @computed <span class="keyword">get</span> totalPrice() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.count * <span class="keyword">this</span>.price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-禁止普通函数更改程序状态并引入action装饰器"><a href="#11-禁止普通函数更改程序状态并引入action装饰器" class="headerlink" title="11.禁止普通函数更改程序状态并引入action装饰器"></a>11.禁止普通函数更改程序状态并引入action装饰器</h3><p>见 9</p>
<h3 id="12-数据监测autorun"><a href="#12-数据监测autorun" class="headerlink" title="12.数据监测autorun"></a>12.数据监测autorun</h3><blockquote>
<p>autorun 方法</p>
</blockquote>
<p>当监测的状态发生变化时，你想根据状态产生“效果”，请使用 autorun。<br>autorun 会在初始化的时候执行一次，会在每次状态发生变化时执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">autorun(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> response = <span class="keyword">await</span> uniqueUsername(<span class="keyword">this</span>.username);</span><br><span class="line">&#125;,&#123;<span class="attr">delay</span>:<span class="number">1500</span>&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="13-todo案例构建项目组件"><a href="#13-todo案例构建项目组件" class="headerlink" title="13.todo案例构建项目组件"></a>13.todo案例构建项目组件</h3><h3 id="14-构建mobx工作流"><a href="#14-构建mobx工作流" class="headerlink" title="14.构建mobx工作流"></a>14.构建mobx工作流</h3><h3 id="15-实现添加任务功能"><a href="#15-实现添加任务功能" class="headerlink" title="15.实现添加任务功能"></a>15.实现添加任务功能</h3><h3 id="16-实现任务列表数据展示功能"><a href="#16-实现任务列表数据展示功能" class="headerlink" title="16.实现任务列表数据展示功能"></a>16.实现任务列表数据展示功能</h3><h3 id="17-实现任务删除功能"><a href="#17-实现任务删除功能" class="headerlink" title="17.实现任务删除功能"></a>17.实现任务删除功能</h3><h3 id="18-更改任务的是否完成状态"><a href="#18-更改任务的是否完成状态" class="headerlink" title="18.更改任务的是否完成状态"></a>18.更改任务的是否完成状态</h3><h3 id="19-计算未完成任务的数量"><a href="#19-计算未完成任务的数量" class="headerlink" title="19.计算未完成任务的数量"></a>19.计算未完成任务的数量</h3><h3 id="20-实现任务筛选功能"><a href="#20-实现任务筛选功能" class="headerlink" title="20.实现任务筛选功能"></a>20.实现任务筛选功能</h3>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScipt/" rel="tag"># JavaScipt</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/02/22/37/" rel="next" title="nrm报错 [ERR_INVALID_ARG_TYPE] 解决方法">
                <i class="fa fa-chevron-left"></i> nrm报错 [ERR_INVALID_ARG_TYPE] 解决方法
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/03/23/40/" rel="prev" title="学习笔记 ----- 【React 框架原理与实战】React Hooks、Chakra-UI、组件性能优化、封装组件库">
                学习笔记 ----- 【React 框架原理与实战】React Hooks、Chakra-UI、组件性能优化、封装组件库 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="FY" />
            
              <p class="site-author-name" itemprop="name">FY</p>
              <p class="site-description motion-element" itemprop="description">Just Be Yourself</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">48</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xuanfeiyu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-4-·-React-框架原理与实战"><span class="nav-number">1.</span> <span class="nav-text">Part 4 · React 框架原理与实战</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#模块二-·-React-数据流方案专题（Redux、MobX）"><span class="nav-number">1.1.</span> <span class="nav-text">模块二 · React 数据流方案专题（Redux、MobX）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任务一：Redux"><span class="nav-number">1.2.</span> <span class="nav-text">任务一：Redux</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-【课程资料】课程资料购物车代码shooping-serve"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.【课程资料】课程资料购物车代码shooping_serve</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-【课程资料】课程资料"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.【课程资料】课程资料</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Redux专题内容介绍"><span class="nav-number">1.2.3.</span> <span class="nav-text">3.Redux专题内容介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Redux简介"><span class="nav-number">1.2.4.</span> <span class="nav-text">4.Redux简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Redux核心概念及工作流程"><span class="nav-number">1.2.5.</span> <span class="nav-text">5.Redux核心概念及工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Redux计数器案例"><span class="nav-number">1.2.6.</span> <span class="nav-text">6.Redux计数器案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Redux核心API总结"><span class="nav-number">1.2.7.</span> <span class="nav-text">7.Redux核心API总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-在React中使用Redux解决的问题"><span class="nav-number">1.2.8.</span> <span class="nav-text">8.在React中使用Redux解决的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-React-计数器"><span class="nav-number">1.2.9.</span> <span class="nav-text">9.React 计数器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-Provider组件与connect方法"><span class="nav-number">1.2.10.</span> <span class="nav-text">10.Provider组件与connect方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-使用connect方法的第二个参数简化组件视图"><span class="nav-number">1.2.11.</span> <span class="nav-text">11.使用connect方法的第二个参数简化组件视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-bindActionsCreators方法的使用"><span class="nav-number">1.2.12.</span> <span class="nav-text">12.bindActionsCreators方法的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-代码重构"><span class="nav-number">1.2.13.</span> <span class="nav-text">13.代码重构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-Action-js"><span class="nav-number">1.2.14.</span> <span class="nav-text">14.Action&#96;&#96;&#96;js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-redux实现弹出框案例"><span class="nav-number">1.2.15.</span> <span class="nav-text">15.redux实现弹出框案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-拆分合并reducer"><span class="nav-number">1.2.16.</span> <span class="nav-text">16.拆分合并reducer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-中间件概念介绍"><span class="nav-number">1.2.17.</span> <span class="nav-text">17.中间件概念介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-开发Redux中间件"><span class="nav-number">1.2.18.</span> <span class="nav-text">18.开发Redux中间件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-Redux中间件开发实例thunk"><span class="nav-number">1.2.19.</span> <span class="nav-text">19.Redux中间件开发实例thunk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-Redux-thunk中间件的使用"><span class="nav-number">1.2.20.</span> <span class="nav-text">20.Redux-thunk中间件的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-Redux-saga中间件的使用"><span class="nav-number">1.2.21.</span> <span class="nav-text">21.Redux-saga中间件的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-Redux-saga中的action传参"><span class="nav-number">1.2.22.</span> <span class="nav-text">22.Redux-saga中的action传参</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-saga文件的拆分与合并"><span class="nav-number">1.2.23.</span> <span class="nav-text">23.saga文件的拆分与合并</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-redux-actions中间件的使用"><span class="nav-number">1.2.24.</span> <span class="nav-text">24.redux-actions中间件的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-shopping项目初始化"><span class="nav-number">1.2.25.</span> <span class="nav-text">25.shopping项目初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-shopping项目搭建redux工作流"><span class="nav-number">1.2.26.</span> <span class="nav-text">26.shopping项目搭建redux工作流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#27-实现商品列表数据展示"><span class="nav-number">1.2.27.</span> <span class="nav-text">27.实现商品列表数据展示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#28-将商品加入到购物车中"><span class="nav-number">1.2.28.</span> <span class="nav-text">28.将商品加入到购物车中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#29-购物车列表数据展示"><span class="nav-number">1.2.29.</span> <span class="nav-text">29.购物车列表数据展示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#30-从购物车中删除商品"><span class="nav-number">1.2.30.</span> <span class="nav-text">30.从购物车中删除商品</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#31-更改购物车中商品的数量"><span class="nav-number">1.2.31.</span> <span class="nav-text">31.更改购物车中商品的数量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#32-更正视图图片显示错误问题"><span class="nav-number">1.2.32.</span> <span class="nav-text">32.更正视图图片显示错误问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#33-计算商品总价"><span class="nav-number">1.2.33.</span> <span class="nav-text">33.计算商品总价</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#34-Redux源码实现：核心逻辑"><span class="nav-number">1.2.34.</span> <span class="nav-text">34.Redux源码实现：核心逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#35-Redux源码实现：参数类型约束"><span class="nav-number">1.2.35.</span> <span class="nav-text">35.Redux源码实现：参数类型约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#36-Redux源码实现：Enhancer"><span class="nav-number">1.2.36.</span> <span class="nav-text">36.Redux源码实现：Enhancer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-Redux源码实现：applyMiddleware"><span class="nav-number">1.2.37.</span> <span class="nav-text">37.Redux源码实现：applyMiddleware</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#38-Redux源码实现：bindActionCreators"><span class="nav-number">1.2.38.</span> <span class="nav-text">38.Redux源码实现：bindActionCreators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-Redux源码实现：combineReducers"><span class="nav-number">1.2.39.</span> <span class="nav-text">39.Redux源码实现：combineReducers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#任务二：MobX"><span class="nav-number">1.3.</span> <span class="nav-text">任务二：MobX</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-【课程资料】课程资料"><span class="nav-number">1.3.1.</span> <span class="nav-text">1.【课程资料】课程资料</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-MobX专题内容介绍"><span class="nav-number">1.3.2.</span> <span class="nav-text">2.MobX专题内容介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-MobX简介"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.MobX简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-开发前的准备工作"><span class="nav-number">1.3.4.</span> <span class="nav-text">4.开发前的准备工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-mobx使用-一"><span class="nav-number">1.3.5.</span> <span class="nav-text">5.mobx使用(一)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-mobx使用-二"><span class="nav-number">1.3.6.</span> <span class="nav-text">6.mobx使用(二)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-更正类中的普通函数的this指向"><span class="nav-number">1.3.7.</span> <span class="nav-text">7.更正类中的普通函数的this指向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-异步更新状态方式一"><span class="nav-number">1.3.8.</span> <span class="nav-text">8.异步更新状态方式一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-异步更新状态方式二"><span class="nav-number">1.3.9.</span> <span class="nav-text">9.异步更新状态方式二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-数据监测computed"><span class="nav-number">1.3.10.</span> <span class="nav-text">10.数据监测computed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-禁止普通函数更改程序状态并引入action装饰器"><span class="nav-number">1.3.11.</span> <span class="nav-text">11.禁止普通函数更改程序状态并引入action装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-数据监测autorun"><span class="nav-number">1.3.12.</span> <span class="nav-text">12.数据监测autorun</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-todo案例构建项目组件"><span class="nav-number">1.3.13.</span> <span class="nav-text">13.todo案例构建项目组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-构建mobx工作流"><span class="nav-number">1.3.14.</span> <span class="nav-text">14.构建mobx工作流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-实现添加任务功能"><span class="nav-number">1.3.15.</span> <span class="nav-text">15.实现添加任务功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-实现任务列表数据展示功能"><span class="nav-number">1.3.16.</span> <span class="nav-text">16.实现任务列表数据展示功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-实现任务删除功能"><span class="nav-number">1.3.17.</span> <span class="nav-text">17.实现任务删除功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-更改任务的是否完成状态"><span class="nav-number">1.3.18.</span> <span class="nav-text">18.更改任务的是否完成状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-计算未完成任务的数量"><span class="nav-number">1.3.19.</span> <span class="nav-text">19.计算未完成任务的数量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-实现任务筛选功能"><span class="nav-number">1.3.20.</span> <span class="nav-text">20.实现任务筛选功能</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FY</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
